<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>从零开始学Python（二）- 字符串和基础操作</title>
      <link href="/python/python_basic/str/"/>
      <url>/python/python_basic/str/</url>
      
        <content type="html"><![CDATA[<p>字符串&amp;操作</p><span id="more"></span><p>Python可以操作str类型的字符串，从单个字符”。”到句子”I am python”。</p><p>一般字符串都是可以使用成对的单引号或双引号标示</p><h1 id="单双引号标示"><a href="#单双引号标示" class="headerlink" title="单双引号标示"></a>单双引号标示</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;123&quot;</span> <span class="comment"># 使用了单引号标示，这个时候是字符串（文本）， 而不是数字123</span></span><br><span class="line">str2 = <span class="string">&quot;I am python&quot;</span></span><br></pre></td></tr></table></figure><p>但如果我们的字符串里面本身就需要展示出单引号或双引号呢？</p><p>这个时候我们就可以采用双引号包含单引号的方法，或反过来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;I &#x27;m python&quot;</span> <span class="comment"># 双引包含单引</span></span><br><span class="line">str2 = <span class="string">&#x27;he said,&quot;python is good&quot;&#x27;</span> <span class="comment">#单引包含双引</span></span><br></pre></td></tr></table></figure><h1 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h1><p>要标示引号本身，还可以采用转义的方法，即加上”&quot;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;he said,\&quot;python is good\&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;he said,&quot;</span>python <span class="keyword">is</span> good<span class="string">&quot;&quot;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>如果我们不使用转义，python会因为无法识别这个语法，给出了SyntaxError的情况</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;he said,&quot;</span>python <span class="keyword">is</span> good<span class="string">&quot;&quot;</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="string">&quot;he said,&quot;</span>python <span class="keyword">is</span> good<span class="string">&quot;&quot;</span></span><br><span class="line">              ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>像我们在自动化测试中常见的JSON字符串的问题，假定我们这些参数放在excel&#x2F;yaml，在自动化接口测试要提取参数，插件直接给我们返回的字符串没问题，要进行参数化的时候就哦豁了~</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ace020&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>插件读取后，当我们要进行json化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python: 丸辣，冲我来的，这是个什么造型，双引号包含双引号？算了，给个SyntaxError语法错误吧</span></span><br><span class="line"><span class="string">&quot;&#123;&quot;</span>name<span class="string">&quot;:&quot;</span>ace020<span class="string">&quot;&#125;&quot;</span>  </span><br></pre></td></tr></table></figure><p>正确做法,假定我们在其他文件中是这样写的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  \&quot;name\&quot;: \&quot;ace020\&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>转为字符串就像str1的值那样</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&quot;&#123;\&quot;name\&quot;: \&quot;ace020\&quot;&#125;&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(str1)</span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ace020&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 我们打印str1的类型，显示是str类型的</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">type</span>(str1))</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&quot;str&quot;</span>&gt;</span><br><span class="line"><span class="comment"># 这时候可以用json将字符串转换成字典啦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> json</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = json.loads(str1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(data)</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ace020&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># 再打印一下类型，成功转为字典啦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">type</span>(data))</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;dict&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h1><h2 id="使用-号拼接字符串"><a href="#使用-号拼接字符串" class="headerlink" title="使用 + 号拼接字符串"></a>使用 + 号拼接字符串</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&quot;I am &quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">&quot;python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(str1 + str2)</span><br><span class="line">I am python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;Wow &quot;</span> + <span class="string">&quot;amazing&quot;</span>)</span><br><span class="line">Wow amazing</span><br></pre></td></tr></table></figure><h2 id="相邻的字符串字面值会自动合并"><a href="#相邻的字符串字面值会自动合并" class="headerlink" title="相邻的字符串字面值会自动合并"></a>相邻的字符串字面值会自动合并</h2><p>这里没有使用+号，而是两段字符串，相邻在一起，字符串前后和中段位置，两段字符串使用了4个单引号</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = <span class="string">&#x27;The more efforts you make, &#x27;</span><span class="string">&#x27;the more fortune you get.&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(text)</span><br><span class="line">The more efforts you make, the more fortune you get.</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>但是要注意，只能用于字面值，不能用于变量，拼接与变量相关时，可以使用加号</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python:又一个语法错误，你们有没有好好学习文档啊</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>prefix = <span class="string">&quot;py&quot;</span></span><br><span class="line"><span class="comment"># 不使用加号</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(prefix<span class="string">&quot;thon&quot;</span>)</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(prefix<span class="string">&quot;thon&quot;</span>)</span><br><span class="line">                ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line"><span class="comment"># 使用加号</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(prefix+<span class="string">&quot;thon&quot;</span>)</span><br><span class="line">python</span><br></pre></td></tr></table></figure><h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>字符串支持索引访问，索引也称为下标。第一个字符的索引是0，最后一个字符的索引是<strong>字符串的长度 - 1</strong></p><h2 id="正数索引"><a href="#正数索引" class="headerlink" title="正数索引"></a>正数索引</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;p&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;y&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&quot;python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;p&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;y&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><h2 id="负数索引"><a href="#负数索引" class="headerlink" title="负数索引"></a>负数索引</h2><p>索引还能搞负数的？那咱们试一下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;n&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;o&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">3</span>]</span><br><span class="line"><span class="string">&#x27;h&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>原来负数是从尾到头。。。</strong></p><h2 id="字符串切片"><a href="#字符串切片" class="headerlink" title="字符串切片"></a>字符串切片</h2><p>字符串：没人为我花生吗？都要把我切片了~</p><p>作者：嘿嘿嘿~~~~~~咱们开始吧~</p><p>要注意的第一点：<strong>切片是左闭右开的，数学中表示为[0, 2)</strong>,在python中 str1[0:2],表示从索引0开始，到1结束。或者按照官方的解释，<strong>截取字符串的长度是索引之差</strong></p><p>要注意的第二点：<strong>切片就算给了负数索引，也是从左到右切片</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;py&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">3</span>:-<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;ho&#x27;</span></span><br></pre></td></tr></table></figure><p>参考官方文档给的解释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---+---+---+---+---+---+</span><br><span class="line"> | P | y | t | h | o | n |</span><br><span class="line"> +---+---+---+---+---+---+</span><br><span class="line"> <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line">-<span class="number">6</span>  -<span class="number">5</span>  -<span class="number">4</span>  -<span class="number">3</span>  -<span class="number">2</span>  -<span class="number">1</span></span><br></pre></td></tr></table></figure><p>那么我只想截取一个范围呢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">3</span>:]</span><br><span class="line"><span class="string">&#x27;hon&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">3</span>:]</span><br><span class="line"><span class="string">&#x27;hon&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">3</span>:]</span><br><span class="line"><span class="string">&#x27;hon&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><h2 id="索引越界"><a href="#索引越界" class="headerlink" title="索引越界"></a>索引越界</h2><p>先上代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">10</span>:]</span><br><span class="line"><span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[-<span class="number">20</span>:]</span><br><span class="line"><span class="string">&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">10</span>:]</span><br><span class="line"><span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;python&quot;</span>[<span class="number">10</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: string index out of <span class="built_in">range</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>原来我们用切片处理的时候，python会帮我们处理切片越界的问题。</p><p>但是直接使用索引读取某个字符，会报IndexError索引错误的错。</p><h1 id="预告"><a href="#预告" class="headerlink" title="预告"></a>预告</h1><p>字符串还拥有着很多的处理方法。暂且不表，咱们先了解清楚数据类型，后续再讲操作。</p><p>下一期列表~</p><hr><p>参考资料：<br><a href="https://docs.python.org/zh-cn/3.11/tutorial/introduction.html#lists">https://docs.python.org/zh-cn/3.11/tutorial/introduction.html#lists</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> python basics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零开始学Python（一）- 数据类型和变量</title>
      <link href="/python/python_basic/variable/"/>
      <url>/python/python_basic/variable/</url>
      
        <content type="html"><![CDATA[<p>从零开始学python基础，包括类型和变量，字符串和编码，list&amp;tuple，条件判断，模式匹配，循环，dict&amp;set</p><span id="more"></span><h1 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a>print函数</h1><p>可以用于向屏幕（控制台）输出制定的文字。</p><p>在我们安装好python以后，在控制台输入python –version，可以看到会打印出python的版本</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) PS C:\Users\hello_user&gt; python --version</span><br><span class="line">Python <span class="number">3.9</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p>直接输入python，会进入python的命令行模式，然后我们输入print(“Hello python”)，控制台输出Hello python字符串，最后输入exit()函数，就会退出python命令行模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) PS C:\Users\hello_user&gt; python</span><br><span class="line">Python <span class="number">3.9</span><span class="number">.1</span> (default, Dec <span class="number">11</span> <span class="number">2020</span>, 09:<span class="number">29</span>:<span class="number">25</span>) [MSC v<span class="number">.1916</span> <span class="number">64</span> bit (AMD64)] :: Anaconda, Inc. on win32</span><br><span class="line"><span class="type">Type</span> <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> <span class="keyword">or</span> <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;Hello python&quot;</span>)</span><br><span class="line">Hello python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exit()</span><br><span class="line">(base) PS C:\Users\hello_user&gt;</span><br></pre></td></tr></table></figure><p>打印多行内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&#x27;&#x27;&#x27;line1</span><br><span class="line">... line2</span><br><span class="line">... line3&#x27;&#x27;&#x27;)</span><br><span class="line">line1</span><br><span class="line">line2</span><br><span class="line">line3</span><br></pre></td></tr></table></figure><h1 id="数据类型和变量"><a href="#数据类型和变量" class="headerlink" title="数据类型和变量"></a>数据类型和变量</h1><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>计算机程序可以处理各种数据，还可以处理图片，文本，音频，视频，网页等各种各样的数据，因此产生了不同的数据类型，使用数据类型去标记数据</p><h3 id="数据类型-整数"><a href="#数据类型-整数" class="headerlink" title="数据类型-整数"></a>数据类型-整数</h3><p>整数包括正整数和负整数，例如1000，-1000, 0， -100等。我们可以使用十进制，十六进制表示整数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 十进制整数</span><br><span class="line">a = 100</span><br><span class="line">b = -100</span><br><span class="line"># 十六进制</span><br><span class="line">c = 0xa1</span><br></pre></td></tr></table></figure><h3 id="数据类型-浮点数"><a href="#数据类型-浮点数" class="headerlink" title="数据类型-浮点数"></a>数据类型-浮点数</h3><p>浮点数也可以称为小数，在科学计数法表示的时候，小数点的位置是可变的，于是也称为浮点数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 1.11*10**3 == 11.1 * 10**2</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>但是我们要注意一个问题，刚刚不是说小数点位置可变，但是值为何不一样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 1.1*10**2 == 11 * 10</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>让我们打印一下经典问题0.1 + 0.2 &#x3D;&#x3D; 0.3 #False</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 0.1 + 0.2</span><br><span class="line">0.30000000000000004</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>整数和浮点数在计算机内部存储的方式是不同的，导致浮点数会有误差。扯远了，具体的要去了解计算机组成的知识。</p><h3 id="数据类型-字符串"><a href="#数据类型-字符串" class="headerlink" title="数据类型-字符串"></a>数据类型-字符串</h3><p>单引号或者双引号扩起来的文本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str1 = &#x27;abc&#x27;</span><br><span class="line">str2 = &quot;def&quot;</span><br></pre></td></tr></table></figure><p>如果单引号本身也是字符的一部分,可以采用双引号包括单引号，或反过来。还可以使用\转义字符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str3 = &quot;I&#x27;m python&quot;</span><br><span class="line">str4 = &#x27;&quot;哇哇&quot;&#x27;</span><br><span class="line">str5 = &quot;I \&#x27;m python&quot;</span><br></pre></td></tr></table></figure><p>如果过多的字符需要转义，可以使用r’’表示内部不转义</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; str6 = r&quot;\\\\\/////&quot;</span><br><span class="line">&gt;&gt;&gt; print(str6)</span><br><span class="line">\\\\\///// # 完整打印</span><br></pre></td></tr></table></figure><h3 id="数据类型-布尔值"><a href="#数据类型-布尔值" class="headerlink" title="数据类型-布尔值"></a>数据类型-布尔值</h3><p>python中的布尔值有True和False，经常用于条件判断。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 1 == 2会返回False</span><br><span class="line">if 1 == 2: </span><br><span class="line">    print(&quot;1 不等于 2&quot;)</span><br></pre></td></tr></table></figure><p>布尔值还可以用 and or not 运算</p><p>and：条件都为True，and运算才是True</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if 1 == 1 and 2 == 2:</span><br><span class="line">    print(&quot;全部条件通过&quot;)</span><br></pre></td></tr></table></figure><p>or: 其中之一的条件为True，运算为True</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if 1 == 1 and 3 == 2:</span><br><span class="line">    print(&quot;全部部分通过&quot;)</span><br></pre></td></tr></table></figure><p>not: 单目运算符，True会变False，反之也一样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if not True: </span><br><span class="line">    print(&quot;不通过&quot;) # 这里不会打印，因为not True变成False， if False 后面不会执行</span><br></pre></td></tr></table></figure><h3 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h3><p>用None表示为空</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str1 = None</span><br></pre></td></tr></table></figure><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="变量名"><a href="#变量名" class="headerlink" title="变量名"></a>变量名</h3><p>变量名必须是英文大小写，数字和_下划线组合，数字不能作为变量名开头</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = 1</span><br><span class="line">b = 2</span><br><span class="line">A = 10</span><br><span class="line">A_a = 20</span><br><span class="line">my_data = &quot;I am a hero&quot;</span><br><span class="line">23_var = &quot;sdf&quot; # 报错，不可用数字开头</span><br></pre></td></tr></table></figure><h3 id="变量在计算机中的存储"><a href="#变量在计算机中的存储" class="headerlink" title="变量在计算机中的存储"></a>变量在计算机中的存储</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str1 = &quot;I like python&quot;</span><br></pre></td></tr></table></figure><p>计算机在内存创建I like python的字符串，再创建一个str1的变量指向字符串</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str1 = &quot;I like python&quot;</span><br><span class="line">str2 = str1</span><br><span class="line">str1 = &quot;I like php&quot;</span><br></pre></td></tr></table></figure><ul><li>计算机在内存创建I like python的字符串,再创建一个str1的变量指向字符串</li><li>创建一个str2的变量指向字符串，这时候 str1 和 str2都指向了字符串，而不是str2指向str1</li><li>计算机在内存创建I like php字符串，str1再指向这个字符串</li></ul><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>不能变的变量，习惯性使用大写表示，但是变量的本身，是可以指向其他数据的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PI = 3.14</span><br><span class="line"># 我是可以改成3.15的</span><br><span class="line">PI = 3.15</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> python basics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium+docker搭建grid</title>
      <link href="/testing/selenium_test/"/>
      <url>/testing/selenium_test/</url>
      
        <content type="html"><![CDATA[<p>Selenium Grid是Selenium套件的一部分，提供了在多台机器，不同浏览器，跨平台运行测试的能力。在web中要做好自动化测试，selenium是非常适配的选择。</p><span id="more"></span><h1 id="一、Selenium-Grid-简介"><a href="#一、Selenium-Grid-简介" class="headerlink" title="一、Selenium Grid 简介"></a>一、Selenium Grid 简介</h1><p>Selenium Grid是Selenium套件的一部分，提供了在多台机器，不同浏览器，跨平台运行测试的能力。在web中要做好自动化测试，selenium是非常适配的选择。</p><h2 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1 简介"></a>1.1 简介</h2><p>Selenium Grid是Selenium套件的一部分，提供了在多台机器，不同浏览器，跨平台运行测试的能力。</p><h3 id="grid组件"><a href="#grid组件" class="headerlink" title="grid组件"></a>grid组件</h3><p>grid由路由器router、分发器distributor、会话映射session map、新会话队列new session queue、节点node、事件总线event bus组成。<br>架构如下图所示：<br><img src="/pics/testing/selenium/selenium_components.png"></p><h4 id="路由器router"><a href="#路由器router" class="headerlink" title="路由器router"></a>路由器router</h4><p>作用：grid的入口点，接收所有外部请求，转发给正确的组件。<br>功能：</p><ul><li>处理新的会话请求，转发到新会话队列。</li><li>查询会话映射，转发请求到正确节点</li><li>平衡负载</li></ul><h4 id="分发器distributor"><a href="#分发器distributor" class="headerlink" title="分发器distributor"></a>分发器distributor</h4><p>作用：</p><ul><li>注册跟踪所有的node以及其功能</li><li>查询新会话队列并处理任何待处理的新会话请求。<br>功能：</li><li>注册节点跟踪其功能</li><li>查询新会话队列，处理新会话请求，分配给对应节点</li><li>通过gridmodel跟踪节点功能</li></ul><h4 id="会话映射session-map"><a href="#会话映射session-map" class="headerlink" title="会话映射session map"></a>会话映射session map</h4><p>作用：</p><ul><li>保存会话id和节点的关系</li><li>路由器在会话映射中查询确认会话id与关联节点。</li></ul><h4 id="新会话队列new-session-queue"><a href="#新会话队列new-session-queue" class="headerlink" title="新会话队列new session queue"></a>新会话队列new session queue</h4><p>作用：</p><ul><li>先进先出顺序保存新会话请求</li><li>可配置请求超时和重试间隔<br>功能：</li><li>新会话请求超时的会被拒绝和删除</li><li>轮训队列，方便将请求分配给可用的节点插槽</li><li>节点插槽决定了一个节点可以同时运行多少个测试用例</li></ul><h4 id="节点node"><a href="#节点node" class="headerlink" title="节点node"></a>节点node</h4><p>作用：</p><ul><li>一个grid可以包含多个node，Node管理它所在机器上可用浏览器的插槽<br>功能：</li><li>Node通过事件总线向分发器注册自己，报告自己的配置</li><li>自动注册可用的浏览器驱动</li><li>创建浏览器插槽，执行接收到的命令</li></ul><h4 id="时间总线event-bus"><a href="#时间总线event-bus" class="headerlink" title="时间总线event bus"></a>时间总线event bus</h4><p>作用：</p><ul><li>充当各组件之间的通信路径<br>功能：</li><li>处理节点注册事件和其他组件内部通信</li><li>通过消息进行通信，避免http通信消耗</li></ul><h1 id="二、docker部署hub-amp-nodes"><a href="#二、docker部署hub-amp-nodes" class="headerlink" title="二、docker部署hub&amp;nodes"></a>二、docker部署hub&amp;nodes</h1><p>selenium的官方docker hub提供了hub,node-chrome,node-firefox节点<br><a href="https://hub.docker.com/r/selenium/hub">https://hub.docker.com/r/selenium/hub</a><br><a href="https://hub.docker.com/r/selenium/node-chrome">https://hub.docker.com/r/selenium/node-chrome</a><br><a href="https://hub.docker.com/r/selenium/node-firefox">https://hub.docker.com/r/selenium/node-firefox</a></p><p>如果遇到网络问题，需要配置docker镜像，<a href="/cicd/basic_docker/#3-3-docker%E6%BA%90%E4%BF%AE%E6%94%B9">请点击这里查看docker篇3.3小节</a></p><p><strong>我们先看看怎么镜像标签怎么看解读</strong></p><p>hub标签：selenium&#x2F;hub-&lt;Major&gt;.&lt;Minor&gt;.&lt;Patch&gt;-&lt;YYYYMMDD&gt;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Selenium Server 4.9.0</span><br><span class="line">Release date 20230426</span><br><span class="line"></span><br><span class="line">e126989f151e        selenium/hub   4</span><br><span class="line">e126989f151e        selenium/hub   4.9</span><br><span class="line">e126989f151e        selenium/hub   4.9.0</span><br><span class="line">e126989f151e        selenium/hub   4.9.0-20230426</span><br></pre></td></tr></table></figure><p>node-chrome标签：selenium&#x2F;node-chrome-&lt;browserVersion&gt;-&lt;browserDriver&gt;-&lt;browserDriverVersion&gt;-&lt;Major&gt;.&lt;Minor&gt;.&lt;Patch&gt;-&lt;YYYYMMDD&gt;<br>其他浏览器同理，作者只是按照个人习惯会挑完整的标签，这个不强制</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Chrome 112.0</span><br><span class="line">ChromeDriver 112.0</span><br><span class="line">Selenium Server 4.9.0</span><br><span class="line">Release date 20230426</span><br><span class="line"></span><br><span class="line">e126989f151e        selenium/node-chrome   4</span><br><span class="line">e126989f151e        selenium/node-chrome   4.9</span><br><span class="line">e126989f151e        selenium/node-chrome   4.9.0</span><br><span class="line">e126989f151e        selenium/node-chrome   4.9.0-20230426</span><br><span class="line">e126989f151e        selenium/node-chrome   112.0                  </span><br><span class="line">e126989f151e        selenium/node-chrome   112.0-20230426         </span><br><span class="line">e126989f151e        selenium/node-chrome   112.0-chromedriver-112.0 </span><br><span class="line">e126989f151e        selenium/node-chrome   112.0-chromedriver-112.0-20230426</span><br><span class="line">e126989f151e        selenium/node-chrome   112.0-chromedriver-112.0-grid-4.9.0-20230426  </span><br></pre></td></tr></table></figure><p><strong>创建docker网络启动镜像</strong></p><p>docker创建网络，hub和nodes基于这个网络进行启动</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker network create selenium-grid-network</span><br></pre></td></tr></table></figure><p>启动hub</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d \</span><br><span class="line">-p 4442-4444:4442-4444 \</span><br><span class="line">--net selenium-grid-network \</span><br><span class="line">--name selenium-hub \</span><br><span class="line">--restart=always \</span><br><span class="line">selenium/hub:4.28.1-20250202</span><br></pre></td></tr></table></figure><p>启动node-chrome容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d --net selenium-grid-network -e SE_EVENT_BUS_HOST=selenium-hub \</span><br><span class="line">    --shm-size=&quot;1g&quot; \</span><br><span class="line">    -e SE_EVENT_BUS_PUBLISH_PORT=4442 \</span><br><span class="line">    -e SE_EVENT_BUS_SUBSCRIBE_PORT=4443 \</span><br><span class="line">    --name node-chrome \</span><br><span class="line">    --restart=always \</span><br><span class="line">    selenium/node-chrome:132.0.6834.159-chromedriver-132.0.6834.159-grid-4.28.1-20250202</span><br></pre></td></tr></table></figure><p>启动node-firefox容器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d --net selenium-grid-network --shm-size=&quot;1g&quot; \</span><br><span class="line"> -e SE_EVENT_BUS_HOST=selenium-hub \</span><br><span class="line">-e SE_EVENT_BUS_PUBLISH_PORT=4442 \</span><br><span class="line">-e SE_EVENT_BUS_SUBSCRIBE_PORT=4443 \</span><br><span class="line">--name node-firefox \</span><br><span class="line">--restart=always \</span><br><span class="line">selenium/node-firefox:129.0-geckodriver-0.35-grid-4.28.1-20250202 </span><br></pre></td></tr></table></figure><p>检查一下容器运行情况</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker ps -a</span><br><span class="line"> sudo docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE                                                                                  COMMAND                  CREATED         STATUS                  PORTS                                                           NAMES</span><br><span class="line">c1cbb0187194   selenium/node-firefox:129.0-geckodriver-0.35-grid-4.28.1-20250202                      &quot;/opt/bin/entry_poin…&quot;   3 minutes ago   Up 3 minutes            5900/tcp, 9000/tcp                                              node-firefox</span><br><span class="line">13131972b822   selenium/node-chrome:132.0.6834.159-chromedriver-132.0.6834.159-grid-4.28.1-20250202   &quot;/opt/bin/entry_poin…&quot;   7 minutes ago   Up 7 minutes            5900/tcp, 9000/tcp                                              node-chrome</span><br><span class="line">39eb162b7ef0   selenium/hub:4.28.1-20250202                                                           &quot;/opt/bin/entry_poin…&quot;   2 hours ago     Up 52 minutes           0.0.0.0:4442-4444-&gt;4442-4444/tcp, :::4442-4444-&gt;4442-4444/tcp   selenium-hub</span><br></pre></td></tr></table></figure><p>检查grid的ui页面，se给我们的grid提供了ui页面，作者搭建的时候是在虚拟机中的docker.<br><strong>作者本地</strong>linux虚拟机地址是192.168.174.128，看官们根据自己的实际地址进行测试。<strong>在虚拟机中搭建docker，再基于docker搭建selenium grid是为了模拟服务器搭建</strong><br>只要打开192.168.174.128:4444就能进入到se grid管理页面</p><p><img src="/pics/testing/selenium/selenium_1.png"></p><h1 id="三、客户端编写代码与测试"><a href="#三、客户端编写代码与测试" class="headerlink" title="三、客户端编写代码与测试"></a>三、客户端编写代码与测试</h1><p>基于上一篇的<a href="/python/python_embedable">python嵌入式开发环境搭建</a>，准备好基础环境之后，我们要安装selenium相关的库了。</p><p>安装selenium</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd path/to/python-3.13.2-embed-amd64</span><br><span class="line">$ ./python.exe -m pip install selenium -t ./Lib/site-packages</span><br></pre></td></tr></table></figure><p>code&#x2F;_<em>main_</em>.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver  </span><br><span class="line"></span><br><span class="line">def get_default_chrome_options():</span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">    options.add_argument(&quot;--no-sandbox&quot;)</span><br><span class="line">    return options</span><br><span class="line"></span><br><span class="line">options = get_default_chrome_options()</span><br><span class="line"></span><br><span class="line">driver = webdriver.Remote(  </span><br><span class="line">    command_executor=&#x27;http://192.168.174.128:4444&#x27;,  </span><br><span class="line">    options=options  </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">driver.get(&quot;https://www.baidu.com&quot;)  </span><br><span class="line">print(driver.title)  </span><br><span class="line">driver.quit()  </span><br></pre></td></tr></table></figure><p>按下ctrl + f5执行代码，大概过了6s，就看到终端打印了baidu首页的title</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\test_learning\selenium_test&gt;  e:; cd &#x27;e:\test_learning\selenium_test&#x27;; &amp; &#x27;e:\test_learning\selenium_test\python-3.13.2-embed-amd64\python.exe&#x27; &#x27;c:\Users\89504\.vscode\extensions\ms-python.debugpy-2025.0.1-win32-x64\bundled\libs\debugpy\launcher&#x27; &#x27;5234&#x27; &#x27;--&#x27; &#x27;E:\test_learning\selenium_test/code/__main__.py&#x27;</span><br><span class="line">百度一下，你就知道</span><br></pre></td></tr></table></figure><p>参考资料：<br><a href="https://www.selenium.dev/zh-cn/documentation/grid/">https://www.selenium.dev/zh-cn/documentation/grid/</a> grid功能<br><a href="https://blog.csdn.net/TestLiChangAn/article/details/137156566">https://blog.csdn.net/TestLiChangAn/article/details/137156566</a> grid介绍<br><a href="https://www.oryoy.com/news/docker-huan-jing-xia-kuai-su-da-jian-selenium-zi-dong-hua-ce-shi-fu-wu-qi-shi-jian-zhi-nan.html">https://www.oryoy.com/news/docker-huan-jing-xia-kuai-su-da-jian-selenium-zi-dong-hua-ce-shi-fu-wu-qi-shi-jian-zhi-nan.html</a> grid搭建<br><a href="https://blog.csdn.net/u013948010/article/details/78539215">https://blog.csdn.net/u013948010/article/details/78539215</a> 测试用例参考<br><a href="https://hub.docker.com/u/selenium">https://hub.docker.com/u/selenium</a><br><a href="https://hub.docker.com/r/selenium/hub">https://hub.docker.com/r/selenium/hub</a><br><a href="https://hub.docker.com/r/selenium/node-chrome">https://hub.docker.com/r/selenium/node-chrome</a><br><a href="https://hub.docker.com/r/selenium/node-firefox">https://hub.docker.com/r/selenium/node-firefox</a><br><a href="https://github.com/SeleniumHQ/docker-selenium/blob/trunk/ENV_VARIABLES.md">https://github.com/SeleniumHQ/docker-selenium/blob/trunk/ENV_VARIABLES.md</a> 环境变量<br><a href="https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/drivers/test_remote_webdriver.py#L68">https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/drivers/test_remote_webdriver.py#L68</a> python se远程</p>]]></content>
      
      
      <categories>
          
          <category> testing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> selenium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python嵌入式开发环境搭建</title>
      <link href="/python/python_embedable/"/>
      <url>/python/python_embedable/</url>
      
        <content type="html"><![CDATA[<p>Python嵌入式包（embeddable package）是Python的一个特殊版本，通常被称为绿色版或嵌入式版。这个版本的Python是一个ZIP压缩包，解压后包含一个最小的Python运行环境，不包括文档、IDLE、pip等工具。这个版本的主要用途包括嵌入到其他程序中、与系统的Python环境隔离以及方便地分发脚本。</p><span id="more"></span><h1 id="一、下载安装"><a href="#一、下载安装" class="headerlink" title="一、下载安装"></a>一、下载安装</h1><p>python embedable 下载地址：<a href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></p><p>下载之后解压解释器，我们将python解释器和代码文件夹放在同一个层级</p><p>D:\py_test</p><ul><li>code</li><li>python-3.13.2-embed-amd64</li></ul><h1 id="二、库加载索引修改"><a href="#二、库加载索引修改" class="headerlink" title="二、库加载索引修改"></a>二、库加载索引修改</h1><p>在python-3.13.2-embed-amd64文件夹中找到python313._pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python313.zip</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"># Uncomment to run site.main() automatically</span><br><span class="line"># 原有备注的，将备注符号取消</span><br><span class="line">import site</span><br></pre></td></tr></table></figure><h1 id="三、pip的安装"><a href="#三、pip的安装" class="headerlink" title="三、pip的安装"></a>三、pip的安装</h1><p>pip是python中标准的库管理器，允许安装和管理不属于python标准库的其他软件包。</p><p>打开这个链接<a href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a><br>将里面的内容全部复制，在python-3.13.2-embed-amd64文件夹中新建get-pip.py文件，并将内容粘贴进去。</p><p><img src="/pics/python/env_1.png"></p><p>在python-3.13.2-embed-amd64文件夹中使用powershell执行.\python.exe get-pip.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.\python.exe get-pip.py</span><br><span class="line">Collecting pip</span><br><span class="line">  Using cached pip-25.0.1-py3-none-any.whl.metadata (3.7 kB)</span><br><span class="line">Using cached pip-25.0.1-py3-none-any.whl (1.8 MB)</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  WARNING: The scripts pip.exe, pip3.13.exe and pip3.exe are installed in &#x27;E:\test_learning\py_embeddable_test\py313\Scripts&#x27; which is not on PATH.</span><br><span class="line">  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.</span><br><span class="line">Successfully installed pip-25.0.1</span><br></pre></td></tr></table></figure><p>安装完成后文件夹会多出两个新文件夹Lib和Scripts</p><h1 id="四、如何安装新的模块"><a href="#四、如何安装新的模块" class="headerlink" title="四、如何安装新的模块"></a>四、如何安装新的模块</h1><p>到这里我们的安装和配置结束了，接下来开始使用pip。<br>切换到Scripts文件夹，里面应该有一个pip.exe</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python-3.13.2-embed-amd64\Scripts&gt; ls</span><br><span class="line"></span><br><span class="line">目录: E:\test_learning\py_embeddable_test\python-3.13.2-embed-amd64\Scripts</span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">-a----         2025/2/19     21:41         108409 pip.exe</span><br><span class="line">-a----         2025/2/19     21:41         108409 pip3.13.exe</span><br><span class="line">-a----         2025/2/19     21:41         108409 pip3.exe</span><br></pre></td></tr></table></figure><p>在使用pip之前，我们先配置阿里源，在python-3.13.2-embed-amd64文件夹内新建pip.ini文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">timeout = 6000</span><br><span class="line">index-url=http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">[install]</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br></pre></td></tr></table></figure><p>测试安装requests三方库，在python-3.13.2-embed-amd64文件夹下执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.\python.exe -m pip install requests -t .\Lib\site-packages</span><br><span class="line">Looking in indexes: http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">Collecting requests</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/f9/9b/335f9764261e915ed497fcdeb11df5dfd6f7bf257d4a6a2a686d80da4d54/requests-2.32.3-py3-none-any.whl (64 kB)</span><br><span class="line">Collecting charset-normalizer&lt;4,&gt;=2 (from requests)</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/27/f2/4f9a69cc7712b9b5ad8fdb87039fd89abba997ad5cbe690d1835d40405b0/charset_normalizer-3.4.1-cp313-cp313-win_amd64.whl (102 kB)</span><br><span class="line">Collecting idna&lt;4,&gt;=2.5 (from requests)</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl (70 kB)</span><br><span class="line">Collecting urllib3&lt;3,&gt;=1.21.1 (from requests)</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/c8/19/4ec628951a74043532ca2cf5d97b7b14863931476d117c471e8e2b1eb39f/urllib3-2.3.0-py3-none-any.whl (128 kB)</span><br><span class="line">Collecting certifi&gt;=2017.4.17 (from requests)</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/38/fc/bce832fd4fd99766c04d1ee0eead6b0ec6486fb100ae5e74c1d91292b982/certifi-2025.1.31-py3-none-any.whl (166 kB)</span><br><span class="line">Installing collected packages: urllib3, idna, charset-normalizer, certifi, requests</span><br><span class="line">  WARNING: The script normalizer.exe is installed in &#x27;E:\test_learning\py_embeddable_test\python-3.13.2-embed-amd64\Scripts&#x27; which is not on PATH.</span><br><span class="line">  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.</span><br><span class="line">Successfully installed certifi-2025.1.31 charset-normalizer-3.4.1 idna-3.10 requests-2.32.3 urllib3-2.3.0</span><br></pre></td></tr></table></figure><p>参数解释 ：</p><ul><li>-m pip 以模块的方式运行 pip</li><li>-t .\python-3.13.2-embed-amd64\Lib\site-packages 指定三方库安装的位置</li></ul><p>查看logs发现我们配置的阿里源是生效的。</p><h1 id="五、vscode配置与运行"><a href="#五、vscode配置与运行" class="headerlink" title="五、vscode配置与运行"></a>五、vscode配置与运行</h1><p>项目根目录新建.vscode文件夹，内部新建settings.json和launch.json</p><p>rootDir</p><ul><li>.vscode<ul><li>settings.json</li><li>launch.json</li></ul></li><li>code<ul><li>main.py</li></ul></li><li>python-3.13.2-embed-amd64<ul><li>…</li><li>python.exe</li></ul></li></ul><p>settings.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;   </span><br><span class="line">    // python 使用import的时候能正确识别我们项目本地的三方库</span><br><span class="line">    &quot;python.analysis.extraPaths&quot;: [&quot;./python-3.13.2-embed-amd64/Lib/site-packages&quot;],</span><br><span class="line">    // 在py文件中打代码的时候能识别和补全代码</span><br><span class="line">    &quot;python.autoComplete.extraPaths&quot;: [&quot;./python-3.13.2-embed-amd64/Lib/site-packages&quot;],</span><br><span class="line">    // 具有环境变量的对象，这些变量将添加到将由 Windows 上的终端使用的 VS Code 进程。设置为 &quot;null&quot; 以删除环境变量</span><br><span class="line">    &quot;terminal.integrated.env.windows&quot;: &#123;</span><br><span class="line">        &quot;pythonPath&quot;: &quot;$&#123;workspaceFolder&#125;/python-3.13.2-embed-amd64/python.exe&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;terminal.integrated.env.linux&quot;: &#123;</span><br><span class="line">        &quot;pythonPath&quot;: &quot;$&#123;workspaceFolder&#125;/python-3.13.2-embed-amd64/python.exe&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;terminal.integrated.env.osx&quot;: &#123;</span><br><span class="line">        &quot;pythonPath&quot;: &quot;$&#123;workspaceFolder&#125;/python-3.13.2-embed-amd64/python.exe&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 第一次加载扩展时要使用的默认 Python 路径，在为工作区选择解释器后不再使用</span><br><span class="line">    &quot;python.defaultInterpreterPath&quot;: &quot;$&#123;workspaceFolder&#125;/python-3.13.2-embed-amd64/python.exe&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>launch.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;0.0.1&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Python:main&quot;,</span><br><span class="line">            &quot;type&quot;: &quot;debugpy&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;program&quot;: &quot;&quot;$&#123;workspaceFolder&#125;/code/main.py&quot;&quot;,</span><br><span class="line">            &quot;console&quot;: &quot;integratedTerminal&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>保存好之后重启vscode。</p><p>重新打开vscode，在code文件夹新建main.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url = &#x27;https://www.baidu.com&#x27;</span><br><span class="line">response = requests.get(url)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><p>这是我们按着ctrl，鼠标放到requests上点击，如图所示，我们链接的是本地requests库，而非全局的。</p><p><img src="/pics/python/env_2.png"></p><p>一切准备就绪了，那么就可以按F5或者ctrl + F5进行调试或者运行了。</p><p>先来ctrl + F5，控制台打印出html格式的字符串</p><p><img src="/pics/python/env_3.png"></p><p>让我们打上断点，看看调试功能，按下F5，然后逐步调试</p><p><img src="/pics/python/env_4.png"></p><p>参考文章：<br><a href="https://www.bilibili.com/opus/917254269692805128">https://www.bilibili.com/opus/917254269692805128</a> python嵌入式打包<br><a href="https://blog.csdn.net/m0_52475295/article/details/127411707">https://blog.csdn.net/m0_52475295/article/details/127411707</a> python嵌入式打包<br><a href="https://blog.csdn.net/Dome_/article/details/89763579">https://blog.csdn.net/Dome_/article/details/89763579</a> pip入门<br><a href="https://blog.csdn.net/qq_38463737/article/details/107780440">https://blog.csdn.net/qq_38463737/article/details/107780440</a> pip.ini<br><a href="https://blog.csdn.net/python03012/article/details/137588709">https://blog.csdn.net/python03012/article/details/137588709</a> requests<br><a href="https://blog.csdn.net/karmueo46/article/details/138992938">https://blog.csdn.net/karmueo46/article/details/138992938</a> pylance无法识别导入问题<br><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance">https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance</a> pylance官方文档</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> requests </tag>
            
            <tag> embedable </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ollama本地部署deepseek并联网</title>
      <link href="/ai/ollama/"/>
      <url>/ai/ollama/</url>
      
        <content type="html"><![CDATA[<p>网络上deepseek总是服务器繁忙，基于作者不太需要617B满血版参数(其实是没钱搞)。对于具有独立显卡的较新的笔记本，也是可以部署一下deepseek的。有时候它们或许能给我们也提供一些从未见过的视野和思考方式。</p><span id="more"></span><h1 id="一、硬件配置"><a href="#一、硬件配置" class="headerlink" title="一、硬件配置"></a>一、硬件配置</h1><p>作者的笔记本硬件配置如下，想要部署个qwen-7b或llama-8b的版本就行，日常使用肯定是没问题的（因为作者试过了才写的文章）。</p><p>系统：Windows 11 家庭中文版<br>硬件：</p><ul><li>cpu：12th Gen Intel(R) Core(TM) i5-12450H   2.00 GHz</li><li>内存：24G</li><li>显卡：4060 8G</li></ul><h1 id="二、ollma下载安装和模型下载"><a href="#二、ollma下载安装和模型下载" class="headerlink" title="二、ollma下载安装和模型下载"></a>二、ollma下载安装和模型下载</h1><p>使用ollama run命令进行下载，确实是有些不稳定的因素在，还是自行下载再导入吧。</p><p>ollama下载地址：<a href="https://ollama.com/">https://ollama.com/</a><br>gguf模型下载：<a href="https://huggingface.co/lmstudio-community/DeepSeek-R1-Distill-Qwen-7B-GGUF">https://huggingface.co/lmstudio-community/DeepSeek-R1-Distill-Qwen-7B-GGUF</a></p><h1 id="三、ollama本地模型配置"><a href="#三、ollama本地模型配置" class="headerlink" title="三、ollama本地模型配置"></a>三、ollama本地模型配置</h1><p>我们在下载模型的同时就可以准备对应的Modelfile了</p><p>在模型的存放路径中，新增一个Modelfile，填入以下内容</p><p>FROM的值可以是已存在的模型，相对路径，绝对路径，按照自己需求选其中一种。<br>作者选择绝对路径这种方式，这样Modelfile放到哪个文件夹都可以，因为后面创建模型的时候可以指定modelfile的路径。</p><ul><li>FROM .\xxxxx.gguf   相对路径</li><li>FROM D:\Users\xxxx\models\xxxxx.gguf 绝对路径</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM D:\Users\xxxx\models\DeepSeek-R1-Distill-Qwen-7B-GGUF.gguf</span><br><span class="line">TEMPLATE &quot;&quot;&quot;&#123;&#123; if .System &#125;&#125;&lt;|start_header_id|&gt;system&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .System &#125;&#125;&lt;|eot_id|&gt;&#123;&#123; end &#125;&#125;&#123;&#123; if .Prompt &#125;&#125;&lt;|start_header_id|&gt;user&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .Prompt &#125;&#125;&lt;|eot_id|&gt;&#123;&#123; end &#125;&#125;&lt;|start_header_id|&gt;assistant&lt;|end_header_id|&gt;</span><br><span class="line"></span><br><span class="line">&#123;&#123; .Response &#125;&#125;&lt;|eot_id|&gt;&quot;&quot;&quot;</span><br><span class="line">PARAMETER stop &quot;&lt;|start_header_id|&gt;&quot;</span><br><span class="line">PARAMETER stop &quot;&lt;|end_header_id|&gt;&quot;</span><br><span class="line">PARAMETER stop &quot;&lt;|eot_id|&gt;&quot;</span><br><span class="line">PARAMETER stop &quot;&lt;|reserved_special_token&quot;</span><br></pre></td></tr></table></figure><h1 id="三、创建模型"><a href="#三、创建模型" class="headerlink" title="三、创建模型"></a>三、创建模型</h1><p>输入指令ollama create &lt;模型名称&gt; -f D:\Users\xxxx\models\Modelfile 就可以把模型导入Ollama了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ollama create ds-qwen-7b-q4km -f D:\Users\xxxx\models\Modelfile</span><br><span class="line">gathering model components</span><br><span class="line">copying file sha256:16bba29e220550acfe6e8981cfd76b607ae00d8568bef711ff6c0455ddb322b8 100%</span><br><span class="line">parsing GGUF</span><br><span class="line">using existing layer sha256:16bba29e220550acfe6e8981cfd76b607ae00d8568bef711ff6c0455ddb322b8</span><br><span class="line">creating new layer sha256:8ab4849b038cf0abc5b1c9b8ee1443dca6b93a045c2272180d985126eb40bf6f</span><br><span class="line">creating new layer sha256:c0aac7c7f00d8a81a8ef397cd78664957fbe0e09f87b08bc7afa8d627a8da87f</span><br><span class="line">writing manifest</span><br><span class="line">success</span><br></pre></td></tr></table></figure><p>最后出现success之后，我们输入ollama list检查模型列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ollama list</span><br><span class="line">NAME                                          ID              SIZE      MODIFIED</span><br><span class="line">ds-qwen-7b-q4km:latest    584f5d393f40    4.9 GB    7 seconds ago</span><br></pre></td></tr></table></figure><h1 id="四、运行并且利用插件进行联网功能"><a href="#四、运行并且利用插件进行联网功能" class="headerlink" title="四、运行并且利用插件进行联网功能"></a>四、运行并且利用插件进行联网功能</h1><p>先载入模型，首次载入需要点时间，等载入之后就可以输入消息了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ollama run ds-qwen-7b-q4km</span><br><span class="line">&gt;&gt;&gt; 你好。请问你是谁？</span><br><span class="line">&lt;/think&gt;</span><br><span class="line"></span><br><span class="line">您好！我是由中国的深度求索（DeepSeek）公司开发的智能助手DeepSeek-R1。如您有任何任何问题，我会尽我所能为您提供帮助。</span><br></pre></td></tr></table></figure><p>浏览器安装Page Assist - A Web UI for Local AI Models，edge浏览器和chrome都支持，它会检测你本地的ollama和运行中的模型<br>作者edge,安装地址：<a href="https://microsoftedge.microsoft.com/addons/detail/page-assist-a-web-ui-fo/ogkogooadflifpmmidmhjedogicnhooa?hl=zh-CN">https://microsoftedge.microsoft.com/addons/detail/page-assist-a-web-ui-fo/ogkogooadflifpmmidmhjedogicnhooa?hl=zh-CN</a></p><p>安装完成后打开插件，选择模型，打开联网开关</p><p><img src="/pics/ai/ollama_1.png"><br>提问了一句，你好，请问网络上对于deepseek的评价如何。<br><img src="/pics/ai/ollama_2.png"></p><p>参考文章：<br><a href="https://blog.csdn.net/weixin_46241866/article/details/144700025">https://blog.csdn.net/weixin_46241866/article/details/144700025</a><br><a href="https://github.com/ollama/ollama/blob/main/docs/modelfile.md#examples">https://github.com/ollama/ollama/blob/main/docs/modelfile.md#examples</a><br><a href="https://www.bilibili.com/video/BV1LYA8eCESA/?spm_id_from=333.337.search-card.all.click&vd_source=aaf34ccf61cf5005766e1ee9255c16a5">https://www.bilibili.com/video/BV1LYA8eCESA/?spm_id_from=333.337.search-card.all.click&amp;vd_source=aaf34ccf61cf5005766e1ee9255c16a5</a></p>]]></content>
      
      
      <categories>
          
          <category> ai </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ollama </tag>
            
            <tag> deepseek </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试环境搭建（四）-docker&amp;zentao（禅道）</title>
      <link href="/cicd/basic_zentao/"/>
      <url>/cicd/basic_zentao/</url>
      
        <content type="html"><![CDATA[<p>禅道是一个国产开源项目，支持项目集管理、测试管理，devops等功能，支持Scrum、瀑布、看板、IPD、融合敏捷、融合瀑布模型，测试团队中常用的敏捷模型也能很好地支持。</p><span id="more"></span><h1 id="一、拉取镜像"><a href="#一、拉取镜像" class="headerlink" title="一、拉取镜像"></a>一、拉取镜像</h1><p>禅道有自己的docker镜像仓库，通过禅道的仓库拉取镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker pull hub.zentao.net/app/zentao:latest</span><br></pre></td></tr></table></figure><h1 id="二、运行镜像"><a href="#二、运行镜像" class="headerlink" title="二、运行镜像"></a>二、运行镜像</h1><p>官方文档提到持久化的数据都保存到容器的&#x2F;data目录，那我们需要持久化，只需要将持久化的目录挂载到容器&#x2F;data</p><p>宿主机创建持久化目录并赋予权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~</span><br><span class="line">$ sudo mkdir -p zentao/data</span><br><span class="line">$ sudo chmod -R a+rwx zentao</span><br></pre></td></tr></table></figure><p>前面我们搭建了mysql和redis，禅道也要使用到这两个工具</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -d --name zentao_test \</span><br><span class="line">--link test_mysql \</span><br><span class="line">--link redis_test \</span><br><span class="line">-e ZT_MYSQL_HOST=test_mysql \</span><br><span class="line">-e ZT_MYSQL_PORT=3306 \</span><br><span class="line">-e ZT_MYSQL_USER=root \</span><br><span class="line">-e ZT_MYSQL_PASSWORD=abc123456 \</span><br><span class="line">-e ZT_MYSQL_DB=zentao_test \</span><br><span class="line">-e PHP_SESSION_TYPE=redis \</span><br><span class="line">-e PHP_SESSION_PATH=tcp://redis_test:6379?auth=abc123456 \</span><br><span class="line">-v ~/zentao/data:/data \</span><br><span class="line">-p 8088:80 \</span><br><span class="line">hub.zentao.net/app/zentao:latest</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 参数解释</span><br><span class="line">--link test_mysql 同一个docker内，可以通过容器名称获取到host,获取到test_mysql的host</span><br><span class="line"># 环境变量</span><br><span class="line">ZT_MYSQL_HOST MySQL 主机地址</span><br><span class="line">ZT_MYSQL_PORT MySQL 主机端口</span><br><span class="line">ZT_MYSQL_USER MySQL 用户名</span><br><span class="line">ZT_MYSQL_PASSWORD MySQL 密码</span><br><span class="line">ZT_MYSQL_DB MySQL 数据库名称</span><br><span class="line">PHP_SESSION_TYPE php session 类型，files | redis</span><br><span class="line">PHP_SESSION_PATH php session 存储路径</span><br></pre></td></tr></table></figure><p>执行docker run 之后，我们查看一下禅道的logs，容器启动完成，禅道的logs指引我们要从浏览器打开ip:port开始安装向导。<br>我们禅道docker容器对外暴露了8088端口，虚拟机默认会对外暴露8088端口，那么访问虚拟机ip:8088直接就可以访问到docker的8088<br>获取虚拟机的ip地址，不记得如何查看<a href="/cicd/basic_mysql/#%E4%BA%94%E3%80%81%E7%89%A9%E7%90%86%E6%9C%BA%EF%BC%88%E7%AC%94%E8%AE%B0%E6%9C%AC%E6%88%96%E5%8F%B0%E5%BC%8F%E7%94%B5%E8%84%91%EF%BC%89%E6%B5%8B%E8%AF%95%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%843306%E7%AB%AF%E5%8F%A3">点击这里，mysql篇的第五点</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker logs 禅道容器id</span><br><span class="line">12:03:31.20</span><br><span class="line"> 12:03:31.21 Welcome to the Easysoft ZenTao 21.4 container</span><br><span class="line"> 12:03:31.21 Subscribe to project updates by watching https://www.zentao.net</span><br><span class="line"> 12:03:31.22 Submit issues and feature requests at https://www.zentao.net/ask.html</span><br><span class="line"> 12:03:31.23</span><br><span class="line"> 12:03:31.27 INFO  ==&gt; Prepare persistence directories.</span><br><span class="line"> 12:03:32.33 INFO  ==&gt; Render php.ini with environment variables.</span><br><span class="line"> 12:03:32.39 INFO  ==&gt; Check whether the Redis is available.</span><br><span class="line"> 12:03:33.41 INFO  ==&gt; Init: Redis is ready.</span><br><span class="line"> 12:03:33.43 INFO  ==&gt; Check zentao data owner...</span><br><span class="line"> 12:03:33.45 INFO  ==&gt; Render apache sites config with envionment variables.</span><br><span class="line"> 12:03:33.49 INFO  ==&gt; Prepare custom extensions.</span><br><span class="line"> 12:03:33.53 INFO  ==&gt; Check whether the MySQL is available.</span><br><span class="line"> 12:03:33.55 INFO  ==&gt; Check whether the Apache is available.</span><br><span class="line"> 12:03:34.56 INFO  ==&gt; Apache: MySQL is ready.</span><br><span class="line"> 12:03:34.58 WARN  ==&gt; Sentry: Waiting Apache 1 seconds</span><br><span class="line"> 12:03:34.61 WARN  ==&gt; Database zentao_test does not exist, creating...</span><br><span class="line"> 12:03:34.68 INFO  ==&gt; Database zentao_test created successfully</span><br><span class="line">[Fri Feb 14 12:03:34.913841 2025] [mpm_prefork:notice] [pid 183:tid 183] AH00163: Apache/2.4.62 (Unix) OpenSSL/1.0.2k-fips SVN/1.14.4 configured -- resuming normal operations</span><br><span class="line">[Fri Feb 14 12:03:34.914392 2025] [core:notice] [pid 183:tid 183] AH00094: Command line: &#x27;/opt/zbox/run/apache/httpd -D FOREGROUND&#x27;</span><br><span class="line"> 12:03:36.60 INFO  ==&gt; Sentry: Apache is ready.</span><br><span class="line"> 12:03:36.64 INFO  ==&gt; The service has been started. Open your browser to access the specified domain or ip:port to complete the installation wizard</span><br><span class="line"> 12:03:36.65 INFO  ==&gt; 服务已启动完成, 请使用浏览器访问设置的域名或ip:port, 继续完成后续安装向导</span><br><span class="line"> 12:03:38.68 INFO  ==&gt; The service has been started. Open your browser to access the specified domain or ip:port to complete the installation wizard</span><br><span class="line"> 12:03:38.69 INFO  ==&gt; 服务已启动完成, 请使用浏览器访问设置的域名或ip:port, 继续完成后续安装向导</span><br><span class="line"> 12:03:41.73 INFO  ==&gt; The service has been started. Open your browser to access the specified domain or ip:port to complete the installation wizard</span><br><span class="line"> 12:03:41.74 INFO  ==&gt; 服务已启动完成, 请使用浏览器访问设置的域名或ip:port, 继续完成后续安装向导</span><br><span class="line"> 12:03:42.77 INFO  ==&gt; The service has been started. Open your browser to access the specified domain or ip:port to complete the installation wizard</span><br><span class="line"> 12:03:42.78 INFO  ==&gt; 服务已启动完成, 请使用浏览器访问设置的域名或ip:port, 继续完成后续安装向导</span><br></pre></td></tr></table></figure><h1 id="三、安装向导"><a href="#三、安装向导" class="headerlink" title="三、安装向导"></a>三、安装向导</h1><p>首先我们打开浏览器输入ip:port，作者虚拟机地址是192.168.53.131，端口指定了8088，打开之后就发现了禅道的安装向导</p><p><img src="/pics/testing/zentao_1.png"></p><p>接来下就是一直下一步直到检查环境<br>session目录显示存储目录不存在，不可写，但是检查又通过，因为我们在docker run zentao的时候设置了PHP_SESSION_TYPE&#x3D;redis而不是files，所以检查通过，点击下一步</p><p><img src="/pics/testing/zentao_2.png"></p><p>接着禅道开始自动往我们自己配置的mysql和redis中写入表和需要的数据</p><p><img src="/pics/testing/zentao_3.png"><br><img src="/pics/testing/zentao_4.png"></p><p>数据库表安装完毕后，禅道会提示我们配置文件所在路径，这个路径是位于docker容器内的，不要搞错了</p><p><img src="/pics/testing/zentao_5.png"></p><p>剩余部分只要跟着提示一步步操作即可，并没有什么难处，这里不再细说。</p><h1 id="四、检查禅道是否使用上了我们部署的外置mysql和redis"><a href="#四、检查禅道是否使用上了我们部署的外置mysql和redis" class="headerlink" title="四、检查禅道是否使用上了我们部署的外置mysql和redis"></a>四、检查禅道是否使用上了我们部署的外置mysql和redis</h1><p>还是老习惯使用navicat进行检查，可以发现，mysql数据库创建和数据表安装，redis中也存储了我们按照提示填的相关信息。<br>说明外置mysql和redis在禅道中已经生效了。</p><p><img src="/pics/testing/zentao_6.png"><br><img src="/pics/testing/zentao_7.png"></p><h1 id="五、当前阶段小总结"><a href="#五、当前阶段小总结" class="headerlink" title="五、当前阶段小总结"></a>五、当前阶段小总结</h1><p>整个测试环境简单搭建基于虚拟机和docker，再到数据库和项目管理系统，在真实测试环境中这还显得非常不足。万事开头难，无论什么都是一步一步的从基建开始。不懂的地方也还有很多，继续加油进步吧~</p><p>参考资料：<br><a href="https://www.zentao.net/price.html">https://www.zentao.net/price.html</a> 功能对比<br><a href="https://www.zentao.net/book/zentaopms/docker-1111.html">https://www.zentao.net/book/zentaopms/docker-1111.html</a> 禅道docker安装<br><a href="https://www.zentao.net/book/zentaopms/docker-1111.html#9">https://www.zentao.net/book/zentaopms/docker-1111.html#9</a> 环境变量</p>]]></content>
      
      
      <categories>
          
          <category> cicd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
            <tag> mysql </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试环境搭建（三）-docker&amp;redis</title>
      <link href="/cicd/basic_redis/"/>
      <url>/cicd/basic_redis/</url>
      
        <content type="html"><![CDATA[<p>Redis 是一个强大的开源的高性能的key-value数据库，值 ( value ) 可以是字符串 ( String ) , 哈希 ( Map ) , 列表 ( list ) , 集合 ( Sets ) 或有序集合 ( Sorted Sets ) 等类型。每秒可以进行11万次读取和8万次写入操作。Redis还提供了多种特性，如发布&#x2F;订阅、通知、key过期等。Redis采用自己实现的分离器来实现高速的读写操作，效率非常高。Redis是一个简单、高效、分布式、基于内存的缓存工具，通过网络连接提供Key-Value式的缓存服务。</p><span id="more"></span><h1 id="一、获取docker-redis镜像"><a href="#一、获取docker-redis镜像" class="headerlink" title="一、获取docker redis镜像"></a>一、获取docker redis镜像</h1><p>唔~~~又到众所周知的原因了，想要拉取镜像，点击看<a href="/cicd/basic_docker/#3-3-docker%E6%BA%90%E4%BF%AE%E6%94%B9">第一篇的3.3小节</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker pull redis:latest</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker image ls</span><br><span class="line">[sudo] password for ace:</span><br><span class="line">REPOSITORY                  TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">hub.zentao.net/app/zentao   latest    f0a33d3e597e   2 weeks ago     605MB</span><br><span class="line">hello-world                 latest    74cc54e27dc4   3 weeks ago     10.1kB</span><br><span class="line">redis                       latest    fa310398637f   5 weeks ago     117MB</span><br><span class="line">mysql                       8.3.0     6f343283ab56   10 months ago   632MB</span><br></pre></td></tr></table></figure><h1 id="二、虚拟机创建映射目录，放置配置文件"><a href="#二、虚拟机创建映射目录，放置配置文件" class="headerlink" title="二、虚拟机创建映射目录，放置配置文件"></a>二、虚拟机创建映射目录，放置配置文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 路径由用户决定</span><br><span class="line">$ cd ~</span><br><span class="line">$ sudo mkdir -p redis/config</span><br><span class="line">$ sudo mkdir -p redis/data</span><br><span class="line">$ sudo mkdir -p redis/logs</span><br><span class="line"># docker redis文档中提到以上的文件夹和文件都需要读写权限，那我偷个懒给与了全部读写执行权限</span><br><span class="line"># -R 递归所有目录和文件</span><br><span class="line">$ sudo chmod -R a+rwx redis</span><br></pre></td></tr></table></figure><p>配置文件redis.conf，路径位于~&#x2F;redis&#x2F;config</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aceserver:~/redis/config$ sudo vim redis.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">配置文件</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"># 注释bind，让外部可以访问redis，或者可以指定ip访问，只是本地测试可以只注释就好</span><br><span class="line"># bind 127.0.0.1 </span><br><span class="line"># 用守护线程的方式启动,默认no</span><br><span class="line">daemonize no</span><br><span class="line"># 给redis设置密码</span><br><span class="line">requirepass yourpassword</span><br><span class="line"># redis持久化，默认是no</span><br><span class="line">appendonly no</span><br><span class="line"># 远程主机检测与客户端的存活时间间隔 默认是300秒</span><br><span class="line">tcp-keepalive 300</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h1 id="三、运行容器"><a href="#三、运行容器" class="headerlink" title="三、运行容器"></a>三、运行容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run -p 6379:6379 --restart=always --name redis2 -v ~/redis/config:/usr/local/etc/redis -v ~/redis/data:/data -v ~/redis/logs:/logs -d redis:7.2.3 redis-server /usr/local/etc/redis/redis.conf --appendonly yes</span><br></pre></td></tr></table></figure><p>参数解释<br>-p 容器6379端口映射到宿主机6379<br>–name 容器name<br>-v ~&#x2F;redis&#x2F;config:&#x2F;usr&#x2F;local&#x2F;etc&#x2F;redis 容器内&#x2F;usr&#x2F;local&#x2F;etc&#x2F;redis文件夹映射到宿主机的~&#x2F;redis&#x2F;config，data和logs同理，这样redis.conf配置文件会存在于容器内&#x2F;usr&#x2F;local&#x2F;etc&#x2F;redis文件夹下<br>-d daemon守护进程运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED         STATUS                     PORTS                                                  NAMES</span><br><span class="line">9a96660e8f33   redis         &quot;docker-entrypoint.s…&quot;   5 seconds ago   Exited (0) 3 seconds ago                                                          redis_test</span><br></pre></td></tr></table></figure><p>检查容器运行发现退出了，检查一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker logs 9a96660e8f33</span><br><span class="line"># WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add &#x27;vm.overcommit_memory = 1&#x27; to /etc/sysctl.conf and then reboot or run the command &#x27;sysctl vm.overcommit_memory=1&#x27; for this to take effect</span><br></pre></td></tr></table></figure><p>Redis 需要内存超分配（vm.overcommit_memory）被设置为 1。这意味着操作系统将始终允许分配所有请求的内存，这对于 Redis 的某些操作至关重要。<br>如果没有正确设置，当 Redis 尝试创建快照或进行某些类型的复制时，可能会因为内存不足而失败。这可能导致数据丢失或其他问题。</p><p>临时更改：在宿主机上执行以下命令,系统重启后失效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sysctl vm.overcommit_memory=1</span><br></pre></td></tr></table></figure><p>永久更改：编辑 &#x2F;etc&#x2F;sysctl.conf 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 添加以下内容</span><br><span class="line">vm.overcommit_memory = 1</span><br></pre></td></tr></table></figure><p>运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sysctl -p</span><br></pre></td></tr></table></figure><h1 id="四、物理机（笔记本或台式电脑）测试连接虚拟机的6379端口"><a href="#四、物理机（笔记本或台式电脑）测试连接虚拟机的6379端口" class="headerlink" title="四、物理机（笔记本或台式电脑）测试连接虚拟机的6379端口"></a>四、物理机（笔记本或台式电脑）测试连接虚拟机的6379端口</h1><p>与mysql一样，使用navicat测试</p><p>在物理机的navicat填好对应资料后，点击左下角的测试连接，可以看到连接成功</p><p><img src="/pics/testing/test_redis.png"></p><h1 id="五、进入redis容器"><a href="#五、进入redis容器" class="headerlink" title="五、进入redis容器"></a>五、进入redis容器</h1><p>进入redis容器并尝试登录和写入数据到数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker exec -it redis容器ID /bin/bash</span><br><span class="line"># -a 代表password，但是这种方法并不安全，只是临时测试使用</span><br><span class="line">$ redis-cli -a abc123456</span><br><span class="line">127.0.0.1:6379&gt; set mykey &quot;hello&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get mykey</span><br><span class="line">&quot;hello&quot;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><p>物理机使用navicat查询数据</p><p><img src="/pics/testing/test_redis_1.png"></p><p>参考资料：<br><a href="https://blog.csdn.net/H1727548/article/details/132512038">https://blog.csdn.net/H1727548/article/details/132512038</a> 介绍<br><a href="https://developer.aliyun.com/article/1388047">https://developer.aliyun.com/article/1388047</a> docker部署<br><a href="https://blog.csdn.net/qq_42146402/article/details/130204064">https://blog.csdn.net/qq_42146402/article/details/130204064</a> 配置说明<br><a href="https://hub.docker.com/_/redis">https://hub.docker.com/_/redis</a> 官方镜像<br><a href="https://blog.csdn.net/m0_57236802/article/details/134726043">https://blog.csdn.net/m0_57236802/article/details/134726043</a> overcommit问题<br><a href="https://redis.com.cn/commands.html">https://redis.com.cn/commands.html</a> 命令文档</p>]]></content>
      
      
      <categories>
          
          <category> cicd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
            <tag> mysql </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试环境搭建（二）-docker&amp;mysql</title>
      <link href="/cicd/basic_mysql/"/>
      <url>/cicd/basic_mysql/</url>
      
        <content type="html"><![CDATA[<p>mysql也是测试项目中必用的，我们可以在docker中部署好mysql，用于我们在项目早期介入，便于灰盒测试。例如登录功能、详情功能等。</p><span id="more"></span><h1 id="一、在宿主机（虚拟机）新建docker-mysql数据挂载目录"><a href="#一、在宿主机（虚拟机）新建docker-mysql数据挂载目录" class="headerlink" title="一、在宿主机（虚拟机）新建docker mysql数据挂载目录"></a>一、在宿主机（虚拟机）新建docker mysql数据挂载目录</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p ~/mysql/&#123;conf,data,log&#125;</span><br></pre></td></tr></table></figure><h1 id="二、运行docker-mysql容器"><a href="#二、运行docker-mysql容器" class="headerlink" title="二、运行docker mysql容器"></a>二、运行docker mysql容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run \</span><br><span class="line">-p 3306:3306 \</span><br><span class="line">--restart=always \</span><br><span class="line">--name test_mysql \</span><br><span class="line">--privileged=true \</span><br><span class="line">-v ~/mysql/log:/var/log/mysql \</span><br><span class="line">-v ~/mysql/data:/var/lib/mysql \</span><br><span class="line">-v ~/mysql/conf/my.cnf:/etc/mysql/my.cnf \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=abc123456 \</span><br><span class="line">-d mysql:8.3.0</span><br></pre></td></tr></table></figure><h1 id="三、检查docker容器"><a href="#三、检查docker容器" class="headerlink" title="三、检查docker容器"></a>三、检查docker容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker ps</span><br><span class="line"># 出现以下信息说明运行成功</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS         PORTS                                                  NAMES</span><br><span class="line">5f32c38e2309   mysql:8.3.0   &quot;docker-entrypoint.s…&quot;   11 seconds ago   Up 9 seconds   0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   test_mysql</span><br></pre></td></tr></table></figure><h1 id="四、进入docker的mysql容器，连接mysql服务器"><a href="#四、进入docker的mysql容器，连接mysql服务器" class="headerlink" title="四、进入docker的mysql容器，连接mysql服务器"></a>四、进入docker的mysql容器，连接mysql服务器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ sudo doccker exec -it 容器ID /bin/bash</span><br><span class="line">$ mysql -u 用户名 -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 9</span><br><span class="line">Server version: 8.3.0 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2024, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br></pre></td></tr></table></figure><h1 id="五、物理机（笔记本或台式电脑）测试连接虚拟机的3306端口"><a href="#五、物理机（笔记本或台式电脑）测试连接虚拟机的3306端口" class="headerlink" title="五、物理机（笔记本或台式电脑）测试连接虚拟机的3306端口"></a>五、物理机（笔记本或台式电脑）测试连接虚拟机的3306端口</h1><p>获取虚拟机的ip地址，在序号2：ens33中看到ip地址是192.168.52.131</p><p>虚拟机终端输入ip addr</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:bb:7c:8d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    altname enp2s1</span><br><span class="line">    inet 192.168.52.131/24 metric 100 brd 192.168.52.255 scope global dynamic ens33</span><br><span class="line">       valid_lft 1024sec preferred_lft 1024sec</span><br><span class="line">    inet6 fe80::20c:29ff:febb:7c8d/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default</span><br><span class="line">    link/ether 02:42:3e:5b:ed:29 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:3eff:fe5b:ed29/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">5: vethb009301@if4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether 66:1f:14:31:c4:92 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet6 fe80::641f:14ff:fe31:c492/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><p>在物理机的navicat填好对应资料后，点击左下角的测试连接，可以看到连接成功</p><p><img src="/pics/testing/navicat2.png"></p><p>双击左侧打开数据库</p><p><img src="/pics/testing/navicat3.png"></p><p>本文重新更新于2025-01</p><p>参考资料：<br><a href="https://blog.csdn.net/donkor_/article/details/139879575">https://blog.csdn.net/donkor_/article/details/139879575</a><br><a href="https://mysql.net.cn/doc/refman/8.0/en/connecting-disconnecting.html">https://mysql.net.cn/doc/refman/8.0/en/connecting-disconnecting.html</a><br><a href="https://blog.csdn.net/Yvesty/article/details/119345796">https://blog.csdn.net/Yvesty/article/details/119345796</a></p>]]></content>
      
      
      <categories>
          
          <category> cicd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试环境搭建（一）-docker&amp;ubuntu</title>
      <link href="/cicd/basic_docker/"/>
      <url>/cicd/basic_docker/</url>
      
        <content type="html"><![CDATA[<p>为了测试环境的一致性，可以先从docker搭建开始，docker是所有必要工具的搭建基础，虽然在大部分成熟的企业中已经做好了相应配置，但是了解搭建过程和目的对于个人成长也是很必要的。</p><span id="more"></span><p>本文重新更新于2025-02-01</p><h1 id="一、物理机、虚拟机和操作系统"><a href="#一、物理机、虚拟机和操作系统" class="headerlink" title="一、物理机、虚拟机和操作系统"></a>一、物理机、虚拟机和操作系统</h1><p>本地采用vmware + ubuntu24.04搭建虚拟机，物理机是x86_64，windows11</p><h1 id="二、虚拟机环境搭建的注意点"><a href="#二、虚拟机环境搭建的注意点" class="headerlink" title="二、虚拟机环境搭建的注意点"></a>二、虚拟机环境搭建的注意点</h1><p>安装参考这个网址：<a href="https://blog.csdn.net/m0_70885101/article/details/137694608">https://blog.csdn.net/m0_70885101/article/details/137694608</a><br>再自己摸索一下问题不大</p><h2 id="换源-amp-apt-update"><a href="#换源-amp-apt-update" class="headerlink" title="换源&amp;apt update"></a>换源&amp;apt update</h2><p>由于众所周知的原因，ubuntu的apt源大概率要更换成<strong>国内镜像</strong></p><p>apt源的配置文件已经更换到 <strong>&#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;ubuntu.sources</strong></p><p>源文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /etc/apt/sources.list.d/</span><br><span class="line">$ cat ubuntu.sources</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Types: deb</span><br><span class="line">URIs: http://cn.archive.ubuntu.com/ubuntu/</span><br><span class="line">Suites: noble noble-updates noble-backports</span><br><span class="line">Components: main restricted universe multiverse</span><br><span class="line">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg</span><br><span class="line"></span><br><span class="line">Types: deb</span><br><span class="line">URIs: http://security.ubuntu.com/ubuntu/</span><br><span class="line">Suites: noble-security</span><br><span class="line">Components: main restricted universe multiverse</span><br><span class="line">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg</span><br></pre></td></tr></table></figure><p>备份源文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp ubuntu.sources ubuntu.sources.bak</span><br></pre></td></tr></table></figure><p>修改ubuntu.sources</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$sudo vim ubuntu.sources</span><br><span class="line"></span><br><span class="line"># 修改成以下内容</span><br><span class="line"></span><br><span class="line">Types: deb</span><br><span class="line">URIs: https://mirrors.aliyun.com/ubuntu/</span><br><span class="line">Suites: noble noble-updates noble-backports noble-security</span><br><span class="line">Components: main restricted universe multiverse</span><br><span class="line">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg</span><br><span class="line"></span><br><span class="line"># 修改完成，退出insert模式，:wq保存和关闭文件</span><br></pre></td></tr></table></figure><p>apt更新</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br></pre></td></tr></table></figure><h1 id="三、docker-engine安装"><a href="#三、docker-engine安装" class="headerlink" title="三、docker engine安装"></a>三、docker engine安装</h1><h2 id="3-1-卸载旧版本"><a href="#3-1-卸载旧版本" class="headerlink" title="3.1 卸载旧版本"></a>3.1 卸载旧版本</h2><p>linux可能提供非官方的docker包，与官方的可能会冲突，必须先卸载一下非官方软件包</p><ul><li>docker.io</li><li>docker-compose</li><li>docker-compose-v2</li><li>docker-doc</li><li>podman-docker</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done</span><br></pre></td></tr></table></figure><p>镜像、容器、网络等存储在&#x2F;var&#x2F;lib&#x2F;docker&#x2F;，删除docker的时候不会移除。如果需要干净的安装环境，选择先清除已存在的数据，参考这个链接<a href="https://docs.docker.com/engine/install/ubuntu/#uninstall-docker-engine">https://docs.docker.com/engine/install/ubuntu/#uninstall-docker-engine</a></p><h2 id="3-2-使用apt进行安装"><a href="#3-2-使用apt进行安装" class="headerlink" title="3.2 使用apt进行安装"></a>3.2 使用apt进行安装</h2><p>1.设置docker的apt存储库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Add Docker&#x27;s official GPG key:</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ca-certificates curl</span><br><span class="line">sudo install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line">sudo chmod a+r /etc/apt/keyrings/docker.asc</span><br><span class="line"></span><br><span class="line"># Add the repository to Apt sources:</span><br><span class="line">echo \</span><br><span class="line">  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span><br><span class="line">  $(. /etc/os-release &amp;&amp; echo &quot;$&#123;UBUNTU_CODENAME:-$VERSION_CODENAME&#125;&quot;) stable&quot; | \</span><br><span class="line">  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p>2.安装docker的包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h2 id="3-3-docker源修改"><a href="#3-3-docker源修改" class="headerlink" title="3.3 docker源修改"></a>3.3 docker源修改</h2><p>又因为众所周知的原因，docker也需要修改为国内源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd /etc/docker/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim daemon.json</span><br></pre></td></tr></table></figure><p>填入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https://docker.1ms.run&quot;,</span><br><span class="line">        &quot;https://docker.xuanyuan.me&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>测试国内源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br><span class="line"># 出现以下信息证明测试成功了</span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">e6590344b1a5: Pull complete</span><br><span class="line">Digest: sha256:d715f14f9eca81473d9112df50457893aa4d099adeb4729f679006bf5ea12407</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>本文重新更新于2025-01</p>]]></content>
      
      
      <categories>
          
          <category> cicd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试基础理论</title>
      <link href="/testing/basic_theory/"/>
      <url>/testing/basic_theory/</url>
      
        <content type="html"><![CDATA[<p>测试基础理论是测试工作的基础</p><span id="more"></span><h1 id="一、软件测试的定义和目的"><a href="#一、软件测试的定义和目的" class="headerlink" title="一、软件测试的定义和目的"></a>一、软件测试的定义和目的</h1><p>定义：软件测试是规定条件下对软件产品进行操作，发现软件中的错误和缺陷，衡量软件质量，并对软件是否满足设计要求进行评估的过程。<br>目的：</p><ul><li>验证软件是否满足需求和用户期望</li><li>发现缺陷和错误，提高软件质量</li><li>提高可靠性和稳定性</li><li>了解软件性能和功能，以便优化和改进</li></ul><h1 id="二、软件测试的原则"><a href="#二、软件测试的原则" class="headerlink" title="二、软件测试的原则"></a>二、软件测试的原则</h1><p>软件测试应尽早测试、全面测试、基于风险测试、迭代测试、具备客观性等。</p><ul><li>尽早原则：应该开发的早起阶段尽早介入，降低修复成本</li><li>全面原则：对功能、模块、接口、边界条件等进行全面测试，确保软件质量</li><li>基于风险测试：根据功能、复杂度、使用频率等因素，评估高风险重点测试</li><li>迭代测试：软件测试要持续迭代，确保软件质量</li><li>客观性：测试人员应该保持客观，准确发现和报告软件中的问题</li></ul><h1 id="三、软件测试类型"><a href="#三、软件测试类型" class="headerlink" title="三、软件测试类型"></a>三、软件测试类型</h1><h2 id="3-1-开发阶段划分"><a href="#3-1-开发阶段划分" class="headerlink" title="3.1 开发阶段划分"></a>3.1 开发阶段划分</h2><h3 id="3-1-1-单元测试"><a href="#3-1-1-单元测试" class="headerlink" title="3.1.1 单元测试"></a>3.1.1 单元测试</h3><p>对软件最小可测单位进行检查验证，一般是针对函数、类、模块进行的测试，一般由开发人员自己完成，保证每个单元的正确性，一般是使用白盒测试的方法。</p><h3 id="3-1-2-集成测试"><a href="#3-1-2-集成测试" class="headerlink" title="3.1.2 集成测试"></a>3.1.2 集成测试</h3><ul><li>单测之后，测试模块间的接口，使用白盒和黑盒测试方法，关注模块间的数据传输和功能冲突。</li><li>讲多个单元组合在一起测试，检查单元间的接口和数据传递是否正确。</li><li>可以分为自顶向下，自底向上和混合等多种方式。</li></ul><h3 id="3-1-3-系统测试"><a href="#3-1-3-系统测试" class="headerlink" title="3.1.3 系统测试"></a>3.1.3 系统测试</h3><ul><li>测试完整系统，包括功能、性能和运行环境，依据需求由黑盒测试工程执行</li><li>整个软件系统作为一个整体，验证系统师傅符合需求和规格说明</li><li>包括功能、性能、兼容性、安全性测试等。</li></ul><h3 id="3-1-4-验收测试"><a href="#3-1-4-验收测试" class="headerlink" title="3.1.4 验收测试"></a>3.1.4 验收测试</h3><ul><li>分为α测试和β测试</li><li>软件部署前的最终测试，由用户或需求方使用黑盒测试方法执行，验证软件是否满足用户的需求和期望。</li></ul><h2 id="3-2-查看代码划分"><a href="#3-2-查看代码划分" class="headerlink" title="3.2 查看代码划分"></a>3.2 查看代码划分</h2><h3 id="3-2-1-黑盒测试"><a href="#3-2-1-黑盒测试" class="headerlink" title="3.2.1 黑盒测试"></a>3.2.1 黑盒测试</h3><ul><li>不关心程序结构，关注输入输出</li><li>测试人员不了解内部实现细节，根据规格说明书来设计测试用例，检查软件是否符合要求</li><li>主要关注软件的外部行为和功能表现</li></ul><h3 id="3-2-2-白盒测试"><a href="#3-2-2-白盒测试" class="headerlink" title="3.2.2 白盒测试"></a>3.2.2 白盒测试</h3><ul><li>研究程序逻辑</li><li>对内部结构和代码有深入了解，根据代码逻辑设计测试用例，检查逻辑正确性和覆盖程度。</li></ul><h3 id="3-2-3-灰盒测试"><a href="#3-2-3-灰盒测试" class="headerlink" title="3.2.3 灰盒测试"></a>3.2.3 灰盒测试</h3><ul><li>介于黑白之间，关注功能和接口</li><li>对于逻辑有一定了解，但不会像白盒一样详细。</li><li>关注外部功能和考虑内部结构。</li></ul><h2 id="3-3-按是否运行划分"><a href="#3-3-按是否运行划分" class="headerlink" title="3.3 按是否运行划分"></a>3.3 按是否运行划分</h2><h3 id="3-3-1-静态测试"><a href="#3-3-1-静态测试" class="headerlink" title="3.3.1 静态测试"></a>3.3.1 静态测试</h3><ul><li>不运行软件，根据文档代码等进行检查和分析，发现潜在问题</li><li>代码审查、文档审核、静态分析等工作方式</li></ul><h3 id="3-3-2-动态测试"><a href="#3-3-2-动态测试" class="headerlink" title="3.3.2 动态测试"></a>3.3.2 动态测试</h3><ul><li>运行软件检查功能、性能、安全等</li><li>包括功能测试、性能测试、压力测试、兼容性测试等</li></ul><h2 id="3-4-按照测试对象划分"><a href="#3-4-按照测试对象划分" class="headerlink" title="3.4 按照测试对象划分"></a>3.4 按照测试对象划分</h2><h3 id="3-4-1-页面测试"><a href="#3-4-1-页面测试" class="headerlink" title="3.4.1 页面测试"></a>3.4.1 页面测试</h3><p>观测用户软件的布局、颜色、字体等，部分公司有UI进行检查</p><h3 id="3-4-2-数据测试"><a href="#3-4-2-数据测试" class="headerlink" title="3.4.2 数据测试"></a>3.4.2 数据测试</h3><p>检查软件处理数据的准确性，完整性和一致性，包括数据输入，检索，输出等。</p><h3 id="3-4-3-易用性测试"><a href="#3-4-3-易用性测试" class="headerlink" title="3.4.3 易用性测试"></a>3.4.3 易用性测试</h3><p>操作简便性、用户学习成本、满意度等。</p><h3 id="3-4-4-业务逻辑测试"><a href="#3-4-4-业务逻辑测试" class="headerlink" title="3.4.4 业务逻辑测试"></a>3.4.4 业务逻辑测试</h3><p>验证软件的业务流程和逻辑是否正确，是否符合业务需求。</p><h3 id="3-4-5-性能测试"><a href="#3-4-5-性能测试" class="headerlink" title="3.4.5 性能测试"></a>3.4.5 性能测试</h3><p>评估软件在不同负载下的性能表现，响应时间，吞吐量，资源利用率等。</p><h3 id="3-4-6-安全测试"><a href="#3-4-6-安全测试" class="headerlink" title="3.4.6 安全测试"></a>3.4.6 安全测试</h3><p>数据泄露、权限管理不当</p><h3 id="3-4-7-兼容性测试"><a href="#3-4-7-兼容性测试" class="headerlink" title="3.4.7 兼容性测试"></a>3.4.7 兼容性测试</h3><p>不同操作系统，浏览器，硬件平台下的兼容性</p><h3 id="3-4-8-文档测试"><a href="#3-4-8-文档测试" class="headerlink" title="3.4.8 文档测试"></a>3.4.8 文档测试</h3><p>基于需求文档、设计文档进行测试，确保文档的完整性</p><h3 id="3-4-9-安装测试"><a href="#3-4-9-安装测试" class="headerlink" title="3.4.9 安装测试"></a>3.4.9 安装测试</h3><p>安装过程是否正确和顺利</p><h3 id="3-4-10-可靠性测试"><a href="#3-4-10-可靠性测试" class="headerlink" title="3.4.10 可靠性测试"></a>3.4.10 可靠性测试</h3><p>在规定时间和条件下，完成规定的功能的能力</p><h3 id="3-4-11-恢复测试"><a href="#3-4-11-恢复测试" class="headerlink" title="3.4.11 恢复测试"></a>3.4.11 恢复测试</h3><p>检查系统的容错能力，系统故障能否在规定时间内恢复。</p><h2 id="3-5-按测试实施的组织划分"><a href="#3-5-按测试实施的组织划分" class="headerlink" title="3.5 按测试实施的组织划分"></a>3.5 按测试实施的组织划分</h2><h3 id="α测试"><a href="#α测试" class="headerlink" title="α测试"></a>α测试</h3><p>开发环境下内部用户测试</p><h3 id="β测试"><a href="#β测试" class="headerlink" title="β测试"></a>β测试</h3><p>软件最终用户在实际使用环境测试</p><h2 id="3-6-是否手工执行划分"><a href="#3-6-是否手工执行划分" class="headerlink" title="3.6 是否手工执行划分"></a>3.6 是否手工执行划分</h2><h3 id="3-6-1-手工测试-x2F-功能测试"><a href="#3-6-1-手工测试-x2F-功能测试" class="headerlink" title="3.6.1 手工测试&#x2F;功能测试"></a>3.6.1 手工测试&#x2F;功能测试</h3><p>人工输入用例并观察结果</p><h3 id="3-6-2-自动化测试"><a href="#3-6-2-自动化测试" class="headerlink" title="3.6.2 自动化测试"></a>3.6.2 自动化测试</h3><p>预设条件下运行软件，评估运行结果</p><h2 id="3-7-测试地域划分"><a href="#3-7-测试地域划分" class="headerlink" title="3.7 测试地域划分"></a>3.7 测试地域划分</h2><p>一般会涉及到对外软件，分为国际化测试和本地化测试。</p><p>软件测试的分类有助于理解测试目的和方法。不同的测试关注点不同，如功能、性能、安全等都有独特的测试方法和重点。通过合理的测试策略，确保软件符合用户的需求和期待。</p><h1 id="四、软件测试的流程"><a href="#四、软件测试的流程" class="headerlink" title="四、软件测试的流程"></a>四、软件测试的流程</h1><p>虽然不同的软件测试流程有不同之处，但一般都会遵循基础测试流程，会根据项目要求对实际情况而定。</p><h2 id="4-1-需求评审阶段"><a href="#4-1-需求评审阶段" class="headerlink" title="4.1 需求评审阶段"></a>4.1 需求评审阶段</h2><ul><li>参与需求讨论和评审会议，由产品和开发团队共同对软件需求进行详细分析理解</li><li>确保对需求的功能、性能、页面等有清晰认知，明确测试的重点和范围</li><li>提出对需求的疑问和建议</li></ul><h2 id="4-2-制定测试计划"><a href="#4-2-制定测试计划" class="headerlink" title="4.2 制定测试计划"></a>4.2 制定测试计划</h2><ul><li>明确测试目标：确认软件需要达到的质量标准和预期功能实现</li><li>界定测试范围：确定需要测试的功能、模块、特性等</li><li>制定测试测试：选择合适的测试方法和技术</li><li>规划测试资源：人力、时间、硬软件资源分配</li><li>测试时间表：制定猜测是进度计划，确保工作按时完成。</li></ul><h2 id="4-3-测试用例设计"><a href="#4-3-测试用例设计" class="headerlink" title="4.3 测试用例设计"></a>4.3 测试用例设计</h2><ul><li>依据需求文档和测试计划，设计详细的测试用例</li><li>考虑正常和异常的测试场景，包括功能、性能、兼容性、安全测试等</li><li>对测试用例进行编号和分类，确保具有良好的可读性和可维护性</li><li>组织测试用例评审，邀请产品和开发人员参与，确保测试用例的完整性和有效性</li></ul><h2 id="4-4-测试环境搭建"><a href="#4-4-测试环境搭建" class="headerlink" title="4.4 测试环境搭建"></a>4.4 测试环境搭建</h2><ul><li>准备硬件设备、系统、数据库、中间件等测试环境</li><li>安装和配置软件和工具，确保稳定性和兼容性</li><li>对测试环境进行验证和调试，确保满足测试要求</li></ul><h2 id="4-5-测试执行"><a href="#4-5-测试执行" class="headerlink" title="4.5 测试执行"></a>4.5 测试执行</h2><ul><li>按照测试计划和用例逐步执行测试</li><li>记录测试过程实际结果，包括通过和发现的缺陷</li><li>对发现的缺陷进行详细记录，描述缺陷出现的步骤，严重程度，优先级等信息</li><li>及时反馈给开发团队，跟踪缺陷的修复情况</li></ul><h2 id="4-6-缺陷管理和跟踪"><a href="#4-6-缺陷管理和跟踪" class="headerlink" title="4.6 缺陷管理和跟踪"></a>4.6 缺陷管理和跟踪</h2><ul><li>缺陷记录，缺陷描述、发现时间、发现人、所属模块、严重程度、优先级</li><li>缺陷修复过程：缺陷分配给开发人员，跟踪修复情况，确保按照修复缺陷</li><li>进行验证：进行回归测试，验证是否正确修复，同时检查是否引入新的缺陷</li></ul><h2 id="4-7-测试评估阶段"><a href="#4-7-测试评估阶段" class="headerlink" title="4.7 测试评估阶段"></a>4.7 测试评估阶段</h2><ul><li>根据测试结果，评估软件质量</li><li>分析测试数据，评估软件功能、性能、兼容性</li><li>编写测试报告，总结测试过程中遇到的情况，测试结果，发现的问题，统计数据等</li></ul><h2 id="4-8-测试报告"><a href="#4-8-测试报告" class="headerlink" title="4.8 测试报告"></a>4.8 测试报告</h2><ul><li>对测试过程进行总结，回顾测试过程中遇到的问题和解决方案</li><li>向产品和开发团队反馈测试结果，提出改进建议</li><li>参与项目总结会议，为后续工作积累经验和提供参考</li></ul><h1 id="五、软件测试方法"><a href="#五、软件测试方法" class="headerlink" title="五、软件测试方法"></a>五、软件测试方法</h1><h2 id="5-1-黑盒测试"><a href="#5-1-黑盒测试" class="headerlink" title="5.1 黑盒测试"></a>5.1 黑盒测试</h2><p>黑盒测试中测试人员不关注内部结构与实现，关注输入输出，功能表现，根据规格说明书来设计测试用例</p><h3 id="5-1-1-等价类划分法"><a href="#5-1-1-等价类划分法" class="headerlink" title="5.1.1 等价类划分法"></a>5.1.1 等价类划分法</h3><ul><li>输入数据划分为若干等价类，每种等价类代表一种可能的输入情况。</li><li>等价类可分为有效等价类和无效等价类<ul><li>有效等价类：符合需求的输入数据</li><li>无效等价类：不符合需求的输入数据</li></ul></li><li>从等价类中选取代表性的数据进行测试，以覆盖各种输入情况</li><li>如需要输入整数<ul><li>有效等价类：随机的整数</li><li>无效等价类：小数</li></ul></li></ul><h3 id="5-1-2-边界值分析法"><a href="#5-1-2-边界值分析法" class="headerlink" title="5.1.2 边界值分析法"></a>5.1.2 边界值分析法</h3><ul><li>选取数据数据范围的边界值进行测试，往往边界值附近更容易出现错误</li><li>如需要输入整数范围1-100<ul><li>选取-1，1,1.1</li><li>选取99,99.1,101</li><li>…</li></ul></li></ul><h3 id="5-1-3-因果图法"><a href="#5-1-3-因果图法" class="headerlink" title="5.1.3 因果图法"></a>5.1.3 因果图法</h3><ul><li>通过分析输入条件之间的因果关系生成判定表，从而设计测试用例</li><li>适用于输入条件之间存在多种组合关系</li><li>如条件A和B都需要满足才能输出结果C<ul><li>A已登录</li><li>B已付费</li><li>C查看结果</li></ul></li></ul><h3 id="5-1-4-决策表法"><a href="#5-1-4-决策表法" class="headerlink" title="5.1.4 决策表法"></a>5.1.4 决策表法</h3><ul><li>将条件和动作列出表格，根据条件组合确定采取的动作从而设计测试用例。</li><li>适用于条件和动作之间存在复杂逻辑关系</li></ul><h3 id="5-1-5-正交试验法"><a href="#5-1-5-正交试验法" class="headerlink" title="5.1.5 正交试验法"></a>5.1.5 正交试验法</h3><ul><li>从大量的试验点中挑选出适量的、有代表性的点，应用依据伽罗瓦理论导出的“正交表”，合理地安排试验的一种科学的试验设计方法。</li><li>如表单中，必填字段A，B，C各有3个参数，那么尝试所有组合方案有3x3x3&#x3D;27种组合，但是出于时间关系，就可以采用正交表，讲27种组合剪至9种组合即可。</li></ul><p>正交表示例：</p><table><thead><tr><th>测试用例编号</th><th>A</th><th>B</th><th>C</th></tr></thead><tbody><tr><td>T1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>T2</td><td>0</td><td>1</td><td>2</td></tr><tr><td>T3</td><td>0</td><td>2</td><td>1</td></tr><tr><td>T4</td><td>1</td><td>0</td><td>1</td></tr><tr><td>T5</td><td>1</td><td>1</td><td>2</td></tr><tr><td>T6</td><td>1</td><td>2</td><td>0</td></tr><tr><td>T7</td><td>2</td><td>0</td><td>2</td></tr><tr><td>T8</td><td>2</td><td>1</td><td>0</td></tr><tr><td>T9</td><td>2</td><td>2</td><td>1</td></tr></tbody></table><h3 id="5-1-6-场景法"><a href="#5-1-6-场景法" class="headerlink" title="5.1.6 场景法"></a>5.1.6 场景法</h3><p>通过模拟用户的操作场景来设计测试用例，主要用于测试系统的业务流程。场景法通常包括基本流（正常的操作流程）和备选流（异常的操作流程）。</p><p>对于一个网上购物的系统，基本流为用户登录、选择商品、加入购物车、结算、支付。备选流可以包括用户未登录时进行操作、商品库存不足、支付失败等情况。根据这些流程设计测试用例。</p><h3 id="5-1-7-错误推测法"><a href="#5-1-7-错误推测法" class="headerlink" title="5.1.7 错误推测法"></a>5.1.7 错误推测法</h3><p>基于经验和直觉推测软件中可能产生的错误，针对性设计测试用例。</p><p>对于一个登录功能，测试人员可能会推测用户可能会输入错误的用户名或密码，或者输入的用户名或密码为空，或者输入的用户名或密码包含特殊字符等情况，然后针对这些推测设计相应的测试用例。</p><h2 id="5-2-白盒测试"><a href="#5-2-白盒测试" class="headerlink" title="5.2 白盒测试"></a>5.2 白盒测试</h2><h3 id="5-2-1-语句覆盖"><a href="#5-2-1-语句覆盖" class="headerlink" title="5.2.1 语句覆盖"></a>5.2.1 语句覆盖</h3><ul><li>确保程序中每一条语句都至少执行一次。</li><li>是一种较弱的覆盖标准，可能会无法发现逻辑错误，特别在判定语句中</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(a &gt; b):</span><br><span class="line">  x = 1;</span><br><span class="line">else:</span><br><span class="line">  x = 2;</span><br><span class="line">y = x + 3;</span><br></pre></td></tr></table></figure><p>一个满足语句覆盖的测试用例可以是 a &#x3D; 2, b &#x3D; 1</p><h3 id="5-2-2-判定覆盖"><a href="#5-2-2-判定覆盖" class="headerlink" title="5.2.2 判定覆盖"></a>5.2.2 判定覆盖</h3><ul><li>要求所有分支都要执行一遍，但仍然可能会忽略某些条件组合导致覆盖度不足</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(a &gt; b):</span><br><span class="line">  x = 1;</span><br><span class="line">else:</span><br><span class="line">  x = 2;</span><br><span class="line">y = x + 3;</span><br></pre></td></tr></table></figure><p>满足判定覆盖的测试用例可以是 a &#x3D; 2, b &#x3D; 1（使判定为真）和 a &#x3D; 1, b &#x3D; 2（使判定为假）</p><h3 id="5-2-3-条件覆盖"><a href="#5-2-3-条件覆盖" class="headerlink" title="5.2.3 条件覆盖"></a>5.2.3 条件覆盖</h3><ul><li>确保判定中每个条件可能的取值至少满足一次</li><li>多个条件的判定需要考虑每个条件的各种可能取值</li><li>例如，对于代码 if (a &gt; b and c &gt; d)，条件覆盖的测试用例需要包括 a &gt; b 为真和为假的情况，以及 c &gt; d 为真和为假的情况。</li></ul><h3 id="5-2-4-判定-条件覆盖"><a href="#5-2-4-判定-条件覆盖" class="headerlink" title="5.2.4 判定-条件覆盖"></a>5.2.4 判定-条件覆盖</h3><ul><li>结合判定和条件覆盖，既保证每个判定结果出现一次，也保证每个条件的取值至少才出现一次</li><li>对于复杂的判定语句，需要仔细设计测试用例满足要求</li></ul><h3 id="5-2-5-条件组合覆盖"><a href="#5-2-5-条件组合覆盖" class="headerlink" title="5.2.5 条件组合覆盖"></a>5.2.5 条件组合覆盖</h3><ul><li>使每个判定中条件的各种可能组合都至少出现一次。</li><li>这是一种较强的覆盖标准，但在实际应用中，可能会因为条件组合的数量过多而导致测试用例数量庞大。</li></ul><h3 id="5-2-6-路径覆盖"><a href="#5-2-6-路径覆盖" class="headerlink" title="5.2.6 路径覆盖"></a>5.2.6 路径覆盖</h3><ul><li>覆盖程序所有路径</li><li>非常严格的标准，但往往受项目时长，复杂度等限制难以实现，路径数量较多。</li></ul><p>在实际的测试中，需要根据项目的需求和资源情况，选择合适的覆盖标准来设计测试用例。</p><h2 id="5-3-灰度测试"><a href="#5-3-灰度测试" class="headerlink" title="5.3 灰度测试"></a>5.3 灰度测试</h2><ul><li>介于白盒和黑盒之间的测试方法，关注外部功能表现的同时，也关注内部结构和逻辑</li><li>测试人员会了解部分软件的内部实现细节，例如软件的架构和模块之间的关系等，又不会像白盒测试一样精细到每一行代码</li></ul><h2 id="5-4-探索性测试"><a href="#5-4-探索性测试" class="headerlink" title="5.4 探索性测试"></a>5.4 探索性测试</h2><p>强调测试人员在测试过程中的主观性和创造性，保证测试的同时降低成本时间。</p><h2 id="5-5-冒烟测试"><a href="#5-5-冒烟测试" class="headerlink" title="5.5 冒烟测试"></a>5.5 冒烟测试</h2><p>对软件的基本功能快速测试，确定软件是否具备可测试性</p><h2 id="5-6-随机测试"><a href="#5-6-随机测试" class="headerlink" title="5.6 随机测试"></a>5.6 随机测试</h2><p>随机选择输入数据和操作步骤测试，发现一些隐藏问题。</p><h2 id="5-7-接口测试"><a href="#5-7-接口测试" class="headerlink" title="5.7 接口测试"></a>5.7 接口测试</h2><p>对软件的内外接口进行测试，检查接口传参、数据格式、异常处理等方面是否符合设计要求，确保不同模块或系统之间正确交互。</p><h2 id="5-8-集成测试"><a href="#5-8-集成测试" class="headerlink" title="5.8 集成测试"></a>5.8 集成测试</h2><p>将多个模块或组件集成在一起进行测试，检查它们之间的接口和协作是否正常，发现集成过程中可能出现的问题。</p><h2 id="5-9-系统测试"><a href="#5-9-系统测试" class="headerlink" title="5.9 系统测试"></a>5.9 系统测试</h2><p>将整个软件系统作为一个整体进行测试，验证系统的功能、性能、安全性、兼容性等方面是否满足需求和规格说明</p><h2 id="5-10-回归测试"><a href="#5-10-回归测试" class="headerlink" title="5.10 回归测试"></a>5.10 回归测试</h2><p>缺陷修复后，重新对相关功能测试，以确保修改没有引入新的问题，同时原有功能正常进行</p><h2 id="5-11-兼容性测试"><a href="#5-11-兼容性测试" class="headerlink" title="5.11 兼容性测试"></a>5.11 兼容性测试</h2><ul><li>系统兼容性：不同操作系统或平台运行</li><li>浏览器兼容性：多种主流浏览器运行</li><li>硬件兼容性：不同的设备</li></ul><h2 id="5-12-本地化测试"><a href="#5-12-本地化测试" class="headerlink" title="5.12 本地化测试"></a>5.12 本地化测试</h2><p>不同国家或地区的语言、文化、货币、日期等</p><h2 id="5-13-可用性测试"><a href="#5-13-可用性测试" class="headerlink" title="5.13 可用性测试"></a>5.13 可用性测试</h2><p>评估软件的的易用性和用户体验，通过实际试用的行为反馈，来提高软件可用性</p><h1 id="六、测试用例的设计"><a href="#六、测试用例的设计" class="headerlink" title="六、测试用例的设计"></a>六、测试用例的设计</h1><ul><li>测试用例定义<ul><li>为了特定目的而设计的一组测试输入，执行条件和预期结果的集合</li><li>是软件的重要组成部分，用于验证软件的需求功能，性能等。</li></ul></li><li>测试用例的重要性<ul><li>全面设计测试用例，发现缺陷和错误，提高软件的质量和可靠性</li><li>合理的测试用例可以减少重复测试，提高效率和覆盖率</li><li>可以作为执行测试的依据，便于测试管理和缺陷跟踪</li><li>作为开发人员和产品人员沟通桥梁，促进团队合作</li></ul></li></ul><table><thead><tr><th>Title</th><th>Description</th></tr></thead><tbody><tr><td>用例编号</td><td>用于唯一标识每个测试用例，方便管理和跟踪。。</td></tr><tr><td>测试项目&#x2F;模块</td><td>描述被测试的功能或特性，明确测试的范围和对象</td></tr><tr><td>测试目的</td><td>阐明该测试用例的测试目标，即希望通过该测试用例验证的内容。</td></tr><tr><td>前置条件</td><td>列出执行该测试用例所需的前提条件</td></tr><tr><td>测试步骤</td><td>详细描述执行测试的操作过程，包括输入数据、操作步骤和执行顺序等。</td></tr><tr><td>预期结果</td><td>说明在执行测试步骤后应该得到的结果，包括界面显示、数据输出、系统响应等方面的预期。</td></tr><tr><td>优先级</td><td>表示该测试用例的重要程度和执行的先后顺序。</td></tr><tr><td>测试类型</td><td>如功能测试、性能测试、安全测试等，明确测试的性质。</td></tr><tr><td>实际结果</td><td>在执行测试后记录实际得到的结果，用于与预期结果进行对比，判断测试是否通过。</td></tr><tr><td>测试人员</td><td>记录执行该测试用例的人员，以便在出现问题时进行追溯和责任认定。</td></tr><tr><td>测试时间</td><td>记录测试用例的执行时间，便于对测试进度进行监控和管理。</td></tr><tr><td>测试级别</td><td>确定测试的级别，如单元测试、集成测试、系统测试等。例如：系统测试。</td></tr></tbody></table><h2 id="6-1-测试用例注意事项"><a href="#6-1-测试用例注意事项" class="headerlink" title="6.1 测试用例注意事项"></a>6.1 测试用例注意事项</h2><ul><li>覆盖全面：尽可能覆盖软件的各种功能，场景和边界</li><li>有效性：测试用例应该能够有效发现软件中的缺陷和问题，避免无效的测试用例浪费时间和资源</li><li>可重复性：用例应该可以在不同环境和条件下重复执行，确保结果一致性和可靠性</li><li>可读性： 具有良好的可读性和可理解性，以便其他人员能够理解</li><li>及时更新： 软件迭代，测试用例也应该及时进行更新和维护</li></ul><h1 id="七、缺陷管理"><a href="#七、缺陷管理" class="headerlink" title="七、缺陷管理"></a>七、缺陷管理</h1><p>测试过程中非常重要的一环，旨在记录、跟踪和解决软件中的bug，确保软件的质量和稳定性，还可以提高开发和测试团队的协作效率，降低软件发布后的风险。</p><h2 id="7-1-缺陷管理流程"><a href="#7-1-缺陷管理流程" class="headerlink" title="7.1 缺陷管理流程"></a>7.1 缺陷管理流程</h2><ul><li>缺陷报告<ul><li>发现缺陷，及时详细记录缺陷的相关信息，重现步骤，预期结果和实际结果等</li><li>使用jira、bugzilla等软件提交缺陷报告</li></ul></li><li>bug等级和分类<ul><li>对bug进行优先级划分，根据bug的严重程度和影响范围，确定修复优先级</li><li>常见的分类包括功能缺陷、性能缺陷、安全缺陷、页面缺陷等</li></ul></li><li>bug分配<ul><li>bug分配给相关开发人员或负责人，确保每个bug都有明确的负责人</li><li>开发人员根据报告分析问题，进行修复</li></ul></li><li>bug修复<ul><li>开发人员修复bug，提交代码，进行自测，确保bug修复</li><li>保持与测试人员的沟通</li></ul></li><li>bug验证<ul><li>测试人员收到修复反馈，需要对修复的bug进行测试，并确保没有引入新的bug</li><li>验证通过，关闭bug报告，如果后期发现再次出现，则重新打开bug报告</li></ul></li><li>bug报告和分析<ul><li>定期生成bug报告，统计数量，类型，严重程度，修复时间等问题</li><li>通过分析，发现开发和测试过程中的薄弱环节，提出改进建议，优化开发和测试流程</li></ul></li></ul><h2 id="7-2-bug组成部分"><a href="#7-2-bug组成部分" class="headerlink" title="7.2 bug组成部分"></a>7.2 bug组成部分</h2><ul><li>编号：每个bug都有唯一的编号</li><li>标题：简要描述bug内容，是快速了解bug的主要信息</li><li>描述：描述具体情况，当时的环境，操作步骤等</li><li>类型：功能、性能、安全、界面缺陷</li><li>严重程度：致命、严重、一般、轻微</li><li>优先级：高中低等，或用数字表示</li><li>发现人：记录人员信息</li><li>时间：发现时间</li><li>模块：功能模块</li><li>重现步骤：详细描述操作步骤，附带的参数等</li><li>附件：相关截图和日志等。</li></ul><h1 id="八、测试模型"><a href="#八、测试模型" class="headerlink" title="八、测试模型"></a>八、测试模型</h1><p>软件测试中有几种常见的测试模型，v模型，w模型，H模型和敏捷测试模型，它们提供了结构化的方法来规划和执行测试，可以帮助测试更加有效地组织和管理整个测试过程，现代测试基本都以敏捷测试为主。</p><h2 id="8-1-v模型"><a href="#8-1-v模型" class="headerlink" title="8.1 v模型"></a>8.1 v模型</h2><p>是瀑布模型的一种改进，强调开发和测试活动的对称性和相互依赖关系。<br><img src="/pics/testing/v_model.png"></p><ul><li><p>优点</p><p>-明确的阶段性结构，开发和测试活动进展可控</p><p>-风险导向的测试，有助于发现和解决软件中的重要问题，提高测试效率和质量</p></li><li><p>缺点</p><ul><li><p>测试活动滞后，无法及时发现和解决问题，可能增加修复成本，并延长交付时间</p></li><li><p>缺乏灵活性和迭代性，面对需求变化频繁和迭代开发的项目不够灵活</p></li></ul></li><li><p>适用范围</p><ul><li>适用于中大型企业，通常企业有成熟的软件开发和测试流程，且能够承担一定的测试成本和资源投入</li></ul></li></ul><h2 id="8-2-w模型"><a href="#8-2-w模型" class="headerlink" title="8.2 w模型"></a>8.2 w模型</h2><p>W模型模明确标注了测试与开发同步进行的关系，且能表现出测试能更提早介入测试中，各个阶段伴进行不同测试设计<br><img src="/pics/testing/w_model.png"></p><ul><li><p>优点</p><ul><li><p>注重迭代开发，测试与开发同步进行，及早介入测试，可更早发现问题</p></li><li><p>更加灵活和变通，测试与开发同步进行可以快速响应需求变化</p></li><li><p>提高了风险管理，版本迭代中可以进行风险评估和优先级的确定，可将主要目光放在高风险测试点</p></li></ul></li><li><p>缺点</p><ul><li><p>对于版本迭代需求稳定要求比较高，无法支持迭代</p></li><li><p>有些项目急短快，无各种文档产生，模型就不使用</p></li><li><p>针对测试要求较高</p></li></ul></li><li><p>适用范围</p><ul><li>适合中大型企业，企业通常需要更快的交付周期和更灵活的开发流程，快速响应需求变更和市场竞争</li></ul></li></ul><h2 id="8-3-h模型"><a href="#8-3-h模型" class="headerlink" title="8.3 h模型"></a>8.3 h模型</h2><p>H模型结合了瀑布模型和迭代模型的优势，强调需求稳定性和迭代开发，有助于提高软件质量和交付效率<br><img src="/pics/testing/h_model.png"></p><ul><li><p>优点</p><ul><li><p>软件测试完全独立，贯穿整个生命周期，与其他流程并行</p></li><li><p>可以尽早介入测试，灵活度较高</p></li><li><p>提高了风险管理，版本迭代中可以进行风险评估和优先级的确定，可将主要目光放在高风险测试点</p></li></ul></li><li><p>缺点</p><ul><li><p>需求稳定性要求高：H模型要求在开发前期尽可能明确和稳定需求，对需求稳定性的要求较高</p></li><li><p>测试就绪准备的点难以掌控，需要精准评估</p></li><li><p>测试人员的技能要求较高，且需要良好的协作和沟通</p></li></ul></li><li><p>适用范围</p><ul><li>适合中大型企业，企业通常需要更快的交付周期和更灵活的开发流程，快速响应需求变更和市场竞争，但目前该类型企业用的比较少。</li></ul></li></ul><h2 id="8-4-敏捷模型"><a href="#8-4-敏捷模型" class="headerlink" title="8.4 敏捷模型"></a>8.4 敏捷模型</h2><p>敏捷软件开发是基于敏捷宣言定义的价值观和原则的一系列方法和实践的总称。自组织、跨职能团队运用适合他们自身环境的实践进行演进得出解决方案。</p><p>故敏捷模型是为了快速迭代开发上线，而引出的一种测试开发模型。强调快速迭代、持续集成和自动化测试。</p><p><img src="/pics/testing/mj_model.png"></p><ul><li><p>优点</p><ul><li><p>快速响应变化，能够及时适应需求变化和项目调整，快速迭代开发和测试</p></li><li><p>提高整体的风险管理，可以及早发现和修复问题，减少项目风险和质量风险</p></li><li><p>提高软件质量，通过持续集成和自动化测试，减少人为错误</p></li></ul></li><li><p>缺点</p><ul><li><p>需求频繁变更，敏捷开发强调变化和灵活性，但这也意味着需求可能会频繁变更</p></li><li><p>需要更专业的测试技能，要求测试团队丰富的测试经验和技能，可以快速迭代中保证高效测试</p></li><li><p>加深自动化测试依赖，自动化测试使用和维护成本增加</p></li></ul></li><li><p>适用范围</p><ul><li>大多为互联网企业（不轮大小），快速迭代开发测试，快速响应需求变更和市场竞争，尽早上线。</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> testing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> testing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>github-page部署https</title>
      <link href="/gh/deploy-https/"/>
      <url>/gh/deploy-https/</url>
      
        <content type="html"><![CDATA[<p>个人域名接入github，强制使用https。</p><span id="more"></span><h1 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h1><p>在做以下事情之前，先要保证username.github.io是可以正常访问的，也就是用户的github-page要可以正常访问</p><p>在github page部署个人blog也很多教程了，这里不再细说。</p><h2 id="个人域名"><a href="#个人域名" class="headerlink" title="个人域名"></a>个人域名</h2><p>个人购买域名可以通过各个服务商进行购买，阿里云、腾讯云、华为云等等，并且网上也很多教程，这里不再细说了。</p><h2 id="CNAME"><a href="#CNAME" class="headerlink" title="CNAME"></a>CNAME</h2><p>笔者的blog是基于<a href="https://molunerfinn.com/hexo-theme-melody-doc/zh-Hans/">hexo-theme-melody</a></p><p>CNAME文件需要放在source下，在github action部署的时候会自动将CNAME部署到gh-page分支</p><h3 id="CNAME文件内容"><a href="#CNAME文件内容" class="headerlink" title="CNAME文件内容"></a>CNAME文件内容</h3><p>在source下创建CNAME文件，写入域名，yourdomain.cn</p><p><strong>CNAME文件名要大写</strong></p><p><strong>CNAME文件名要大写</strong></p><p><strong>CNAME文件名要大写</strong></p><p>source&#x2F;CNAME</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yourdomain.cn</span><br></pre></td></tr></table></figure><h1 id="域名商管理后台修改域名解析"><a href="#域名商管理后台修改域名解析" class="headerlink" title="域名商管理后台修改域名解析"></a>域名商管理后台修改域名解析</h1><p>默认情况下域名是解析到购买的服务器，现在我们要修改到指向username.github.io</p><ul><li>添加一个CNAME，主机记录@，记录值username.github.io</li><li>添加一个CNAME，主机记录www，记录值username.github.io</li></ul><p>这样无论是否使用www，都能正常访问，<a href="http://www.yourdomain.cn/">www.yourdomain.cn</a>, yourdomain.cn，都会先解析成username.github.io，再根据CNAME变回个人域名</p><p><img src="/pics/github/deploy-https-1.png"></p><h1 id="github-setting"><a href="#github-setting" class="headerlink" title="github setting"></a>github setting</h1><p>去github对应的blog仓库内设置个人域名和https事宜</p><p>打开仓库，点击Settings，点击左侧的Pages，找到custom domain，填入个人域名</p><p>如果域名管域名解析那里设置正确，填入个人域名后，稍等一会会显示dns解析正确，就可以勾选Enforce HTTPS了</p><p><img src="/pics/github/deploy-https-2.png"><br><img src="/pics/github/deploy-https-3.png"></p><h1 id="ping-yourdomain-cn"><a href="#ping-yourdomain-cn" class="headerlink" title="ping yourdomain.cn"></a>ping yourdomain.cn</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">64 bytes from xxx.xxx.xxx.xxx: icmp_seq=0 ttl=53 time=99.820 ms</span><br><span class="line">64 bytes from xxx.xxx.xxx.xxx: icmp_seq=1 ttl=53 time=100.451 ms</span><br><span class="line">64 bytes from xxx.xxx.xxx.xxx: icmp_seq=2 ttl=53 time=101.277 ms</span><br><span class="line">64 bytes from xxx.xxx.xxx.xxx: icmp_seq=3 ttl=53 time=109.720 ms</span><br></pre></td></tr></table></figure><p>上方打印的 from xxx.xxx.xxx.xxx，这些xxx代表的是ip地址。</p><p>如果这个ip地址并不是你的服务器地址，并且个人域名可以正常访问，说明配置没有问题了。</p>]]></content>
      
      
      <categories>
          
          <category> github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github-page </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql 搭建与基础</title>
      <link href="/database/mysql/basic/"/>
      <url>/database/mysql/basic/</url>
      
        <content type="html"><![CDATA[<p>mysql基础学习与基础docker搭建</p><span id="more"></span><h2 id="数据库相关定义"><a href="#数据库相关定义" class="headerlink" title="数据库相关定义"></a>数据库相关定义</h2><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>数据库 database，按照特定格式存储数据的<strong>文件集合</strong></p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>用户可以对存储的数据进行增删改查操作。</p><h3 id="数据库管理系统"><a href="#数据库管理系统" class="headerlink" title="数据库管理系统"></a>数据库管理系统</h3><p>用户与操作系统之间使用的维护数据库的数据管理软件，例如 mysql，mongodb，oracle 等。</p><h3 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h3><p>分为关系型数据库和非关系型数据库，mysql 数据关系型</p><h4 id="关系型数据库是由多张表连接组成的数据库"><a href="#关系型数据库是由多张表连接组成的数据库" class="headerlink" title="关系型数据库是由多张表连接组成的数据库"></a>关系型数据库是由多张表连接组成的数据库</h4><p>优点：</p><ul><li>表结构，格式一致，易于维护</li><li>提供成熟的 sql 语言操作，使用方便</li><li>支持事务，表关联外键，能充分保证数据安全与完整性</li><li>数据存储在硬盘中，丢失风险低</li></ul><p>缺点：</p><ul><li>数据存储在硬盘，读写性能较低，不能满足海量数据的高效率读写，经过优化可以提高一定查询速度，拆分表，表按照月度拆分等</li><li>只支持基础类型和少量的集合类型</li></ul><p>对于高并发的场景，可以分库，建立 mysql 集群。</p><p>分布式和集群的区别：</p><ul><li>分布式是指将不同业务分布到不同地方</li><li>集群是将几台服务器集中在一起，目的是为了同一个业务</li></ul><h4 id="非关系性数据库-NoSql"><a href="#非关系性数据库-NoSql" class="headerlink" title="非关系性数据库 NoSql"></a>非关系性数据库 NoSql</h4><p>优点：</p><ul><li>支持存储格式较多，可以是 key-value，数组，文档形式，图片形式</li><li>速度快，更适合海量数据访问</li><li>支持分布式处理，一个数据库可以分成多个部分保存到不同服务器</li></ul><p>缺点</p><ul><li>非关系型数据库没有 sql 支持，使用不便，维护成本高</li><li>没有事务处理，没有表关联，所以无法保证数据完整性和安全性，不适合对安全要求较高的场景</li><li>功能相对关系型数据库会不够完善（随着发展，肯定会继续完善）</li></ul><h2 id="mysql-数据库安装"><a href="#mysql-数据库安装" class="headerlink" title="mysql 数据库安装"></a>mysql 数据库安装</h2><h3 id="mysqld-和-mysql"><a href="#mysqld-和-mysql" class="headerlink" title="mysqld 和 mysql"></a>mysqld 和 mysql</h3><ul><li>mysqld 在安装好 mysql 数据库后，身份是一个后台服务程序，mysql 启动后，mysqld 会开启一个守护进程，如果守护进程没有开启，mysql 服务器可能会挂掉</li><li>mysql 相当于是客户端和 mysql 服务器之间进行 sql 语句交互提供操作环境的 cli 命令行工具，客户端连接 mysql 服务器和操作表都在这个操作环境下进行，参考一下前端开发中的脚手架，也是提供了操作的命令行工具</li></ul><h3 id="docker-安装-mysql"><a href="#docker-安装-mysql" class="headerlink" title="docker 安装 mysql"></a>docker 安装 mysql</h3><h4 id="拉取-mysql-的镜像"><a href="#拉取-mysql-的镜像" class="headerlink" title="拉取 mysql 的镜像"></a>拉取 mysql 的镜像</h4><p>mac m1 arm64v8 平台</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull arm64v8/mysql:latest</span><br></pre></td></tr></table></figure><p>其他平台</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:latest</span><br></pre></td></tr></table></figure><h4 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=some_root_password -p 3306:3306  -d arm64v8/mysql:latest</span><br></pre></td></tr></table></figure><h4 id="使用-navicat-测试-mysql-连接"><a href="#使用-navicat-测试-mysql-连接" class="headerlink" title="使用 navicat 测试 mysql 连接"></a>使用 navicat 测试 mysql 连接</h4><p>填入对应账号密码，主机等，然后点击左下角的 test connection</p><p><img src="/pics/infrastructure/test-mysql.jpeg"></p><p>测试成功后，点击右下角 save 保存连接</p><p><img src="/pics/infrastructure/test-mysql-success.jpeg"></p><h3 id="my-ini-x2F-my-cnf-配置文件解析"><a href="#my-ini-x2F-my-cnf-配置文件解析" class="headerlink" title="my.ini&#x2F;my.cnf 配置文件解析"></a>my.ini&#x2F;my.cnf 配置文件解析</h3><p>现阶段一般都是使用 docker 搭建数据库等环境</p><p>本地环境</p><ul><li>物理机：mac m1</li><li>虚拟机：docker</li><li>镜像：arm64v8&#x2F;mysql</li></ul><p>不同物理机平台可能会有些不同</p><p>在 docker 中，my.cnf&#x2F;my.ini 位于&#x2F;etc&#x2F;my.cnf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line"><span class="comment"># mysql客户端默认字符集</span></span><br><span class="line">default-character-set=UTF8MB4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line">skip-host-cache</span><br><span class="line">skip-name-resolve</span><br><span class="line"><span class="comment"># mysql数据库的数据存储目录</span></span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/run/mysqld/mysqld.sock</span><br><span class="line">secure-file-priv=/var/lib/mysql-files</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line">user=mysql</span><br><span class="line"><span class="comment"># 服务端使用的字符集,与客户端一样</span></span><br><span class="line">character-set-server=UTF8MB4</span><br><span class="line"><span class="comment"># 最大连接数</span></span><br><span class="line">max_connections=200</span><br><span class="line"><span class="comment"># 创建新表使用的默认存储引擎</span></span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">port=3306</span><br><span class="line">socket=/var/run/mysqld/mysqld.sock</span><br><span class="line"></span><br><span class="line">!includedir /etc/mysql/conf.d/</span><br></pre></td></tr></table></figure><h3 id="mysql-登录"><a href="#mysql-登录" class="headerlink" title="mysql 登录"></a>mysql 登录</h3><p>进入镜像内部</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &lt;container-name&gt; bash</span><br></pre></td></tr></table></figure><p>输入 mysql -u root -p 后，提示输入密码，输入密码后就可以登录到 mysql 内部了</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><h2 id="mysql-基本操作"><a href="#mysql-基本操作" class="headerlink" title="mysql 基本操作"></a>mysql 基本操作</h2><p>操作需要成功登录 mysql 之后</p><h3 id="显示所有数据库"><a href="#显示所有数据库" class="headerlink" title="显示所有数据库"></a>显示所有数据库</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><h3 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h3><p>创建一个没有权限用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user <span class="string">&#x27;admin&#x27;</span> identified with mysql_native_password by <span class="string">&#x27;some_psw&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="分配权限"><a href="#分配权限" class="headerlink" title="分配权限"></a>分配权限</h3><p>分配所有权限给 admin</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges ON *.* TO admin@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>创建名称为 test 的数据库，如果数据库已存在，则不创建。</p><p>character: 指定数据库的字符集，避免存储的数据出现乱码，或者某些字符不支持</p><p>collate: 指定字符集的默认校对规则</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database IF NOT EXISTS <span class="built_in">test</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;</span><br></pre></td></tr></table></figure><h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><p>显示所有数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases</span><br></pre></td></tr></table></figure><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><p>如果 test 数据库存在，删除 test 数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database <span class="keyword">if</span> exists <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h3><p>会切换到 test 数据库</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use <span class="built_in">test</span>;</span><br></pre></td></tr></table></figure><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><p>前面说过，关系型数据库是一张一张的表架构组合而成，userid，username，psw 等这些称为字段（field），而字段的类型从创建表阶段就定好了</p><p>userid int NOT NULL AUTO_INCREMENT<br>userid int 类型 非空 自增长</p><p>primary key(userid)，表示是一个可以唯一表示一条记录的字段</p><p><strong>注意：创建数据表之前必须使用 use &lt;database name&gt;去切换到对应的数据库</strong></p><p><strong>注意：创建数据表之前必须使用 use &lt;database name&gt;去切换到对应的数据库</strong></p><p><strong>注意：创建数据表之前必须使用 use &lt;database name&gt;去切换到对应的数据库</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table userinfo(</span><br><span class="line">  userid int NOT NULL AUTO_INCREMENT,</span><br><span class="line">  username varchar(30) NOT NULL,</span><br><span class="line">  psw int NOT NULL,</span><br><span class="line">  address varchar(50) default <span class="string">&#x27;empty address&#x27;</span>,</span><br><span class="line">  valid TINYINT default 1,</span><br><span class="line">  birth DATETIME null,</span><br><span class="line">  PRIMARY KEY(userid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>创建数据表完成，输入 show tables;显示当前数据库的表</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------+</span><br><span class="line">| Tables_in_test |</span><br><span class="line">+----------------+</span><br><span class="line">| userinfo       |</span><br><span class="line">+----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE userinfo RENAME TO myuserinfo;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------+</span><br><span class="line">| Tables_in_test |</span><br><span class="line">+----------------+</span><br><span class="line">| myuserinfo     |</span><br><span class="line">+----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="添加数据到某个表-insert-into"><a href="#添加数据到某个表-insert-into" class="headerlink" title="添加数据到某个表 insert into"></a>添加数据到某个表 insert into</h3><p>提供完整数据的写法</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into userinfo values(1, <span class="string">&#x27;username1&#x27;</span>, <span class="string">&#x27;123123&#x27;</span>, <span class="string">&#x27;guangzhou&#x27;</span>, 1, <span class="string">&#x27;1989/1/1 01:01:01&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>有些字段在创建数据表的阶段提供了默认值，例如地址 address，是否合法 valid，那么可以通过指定字段和对应值插入数据</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into userinfo(username, psw, birth) values(<span class="string">&#x27;user2&#x27;</span>, <span class="string">&#x27;123123123&#x27;</span>, <span class="string">&#x27;1989/1/1 01:01:01&#x27;</span>);</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from userinfo;</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">| userid | username  | psw       | address       | valid | birth               |</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">|      1 | username1 |    123123 | guangzhou     |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">|      2 | user2     | 123123123 | empty address |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>某些字段指定了 not null 并且没有指定 default，则必须要提供值.</p><p>这个例子没有提供 username 字段的值，提示 username 没有默认值</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into userinfo(psw, birth) values(<span class="string">&#x27;123123&#x27;</span>, <span class="string">&#x27;1989/1/1 01:01:01&#x27;</span>);</span><br><span class="line">ERROR 1364 (HY000): Field <span class="string">&#x27;username&#x27;</span> doesn<span class="string">&#x27;t have a default value</span></span><br></pre></td></tr></table></figure><h3 id="选择查询-select"><a href="#选择查询-select" class="headerlink" title="选择查询 select"></a>选择查询 select</h3><p>在 userinfo 表中查询所有数据</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from userinfo;</span><br><span class="line">+--------+-----------+--------+-----------+-------+---------------------+</span><br><span class="line">| userid | username  | psw    | address   | valid | birth               |</span><br><span class="line">+--------+-----------+--------+-----------+-------+---------------------+</span><br><span class="line">|      1 | username1 | 123123 | guangzhou |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">+--------+-----------+--------+-----------+-------+---------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="修改字段名称"><a href="#修改字段名称" class="headerlink" title="修改字段名称"></a>修改字段名称</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table myuserinfo change psw password varchar(20);</span><br><span class="line">Query OK, 2 rows affected (0.05 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure><h3 id="更新一行数据"><a href="#更新一行数据" class="headerlink" title="更新一行数据"></a>更新一行数据</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update userinfo <span class="built_in">set</span> age=56 <span class="built_in">where</span> userid=1;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure><h2 id="mysql-数据类型"><a href="#mysql-数据类型" class="headerlink" title="mysql 数据类型"></a>mysql 数据类型</h2><h3 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h3><ul><li>char：固定长度 1-255 字节，定好了长度之后，无论实际长度，都是占用固定长度</li><li>varchar：可变长度 1-255 字节，定好了长度之后，会根据实际长度进行伸缩</li><li>text：大文本 65535 字节</li></ul><h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><ul><li>tinyint：1 byte</li><li>smallint：2 byte</li><li>mediumint：3 byte</li><li>int：4 byte</li><li>bigint：8 byte</li></ul><h3 id="浮动类型"><a href="#浮动类型" class="headerlink" title="浮动类型"></a>浮动类型</h3><ul><li>float：4 byte</li><li>double：8 byte</li></ul><h3 id="日期-x2F-时间类型"><a href="#日期-x2F-时间类型" class="headerlink" title="日期&#x2F;时间类型"></a>日期&#x2F;时间类型</h3><ul><li>date：3 byte 记录的是年月日</li><li>datetime：8 byte 年月日时分秒</li></ul><h2 id="数据库查询"><a href="#数据库查询" class="headerlink" title="数据库查询"></a>数据库查询</h2><h3 id="查询所有行"><a href="#查询所有行" class="headerlink" title="查询所有行"></a>查询所有行</h3><p>select * from &lt;table name&gt;</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from userinfo;</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">| userid | username  | password  | address       | valid | birth               |</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">|      1 | username1 | 123123    | guangzhou     |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">|      2 | user2     | 123123123 | empty address |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">+--------+-----------+-----------+---------------+-------+---------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.02 sec)</span><br></pre></td></tr></table></figure><h3 id="投影查询，即查询局部字段"><a href="#投影查询，即查询局部字段" class="headerlink" title="投影查询，即查询局部字段"></a>投影查询，即查询局部字段</h3><p>需要查询多个字段可以使用逗号分隔</p><p>select address from userinfo;<br>select userid,username from userinfo;</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select userid,username from userinfo;</span><br><span class="line">+--------+-----------+</span><br><span class="line">| userid | username  |</span><br><span class="line">+--------+-----------+</span><br><span class="line">|      1 | username1 |</span><br><span class="line">|      2 | user2     |</span><br><span class="line">+--------+-----------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="字段别名设置"><a href="#字段别名设置" class="headerlink" title="字段别名设置"></a>字段别名设置</h3><p>select userid,username as un, address as addr from userinfo;</p><p>通过关键字as，将username设置为别名un，address设置为addr</p><p>这种别名设置是临时的，并不会改动原有字段名</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select userid,username as un, address as addr from userinfo;</span><br><span class="line">+--------+-----------+---------------+</span><br><span class="line">| userid | un        | addr          |</span><br><span class="line">+--------+-----------+---------------+</span><br><span class="line">|      1 | username1 | guangzhou     |</span><br><span class="line">|      2 | user2     | empty address |</span><br><span class="line">+--------+-----------+---------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="limit查询"><a href="#limit查询" class="headerlink" title="limit查询"></a>limit查询</h3><p><strong>注意：mysql的位置是从0开始，与我们大部分编程语言中的索引是一样的</strong></p><p><strong>注意：mysql的位置是从0开始，与我们大部分编程语言中的索引是一样的</strong></p><p><strong>注意：mysql的位置是从0开始，与我们大部分编程语言中的索引是一样的</strong></p><p>limit是mysql中的一个特殊关键字，有三种使用方式</p><ul><li>limit 记录数, 从第一条开始查询 select * from userinfo limit 1;</li><li>limit 起始位置，记录数  select * from userinfo limit 1,1;</li><li>limit 记录数 offset 偏移 select * from userinfo limit 1 offset 1;</li></ul><p>方式二和三的结果是一样的</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from userinfo <span class="built_in">limit</span> 2,3;</span><br><span class="line">mysql&gt; select * from userinfo <span class="built_in">limit</span> 3 offset 2;</span><br><span class="line"></span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">| userid | username | password | address   | valid | birth               |</span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">|      3 | user3    | 123123   | guangzhou |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">|      4 | user4    | 123123   | guangzhou |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">|      5 | user5    | 123123   | guangzhou |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><ul><li>and 并查询 select * from userinfo where username&#x3D;’user2’ and password&#x3D;’123123’;</li><li>or 或查询 select * from userinfo where username&#x3D;’user2’ or password&#x3D;’123123’;</li><li>between 区间查询 select * from userinfo where age between 30 and 35;</li><li>in 子查询,只会查询in里面的条件，30岁和35岁，31-34不算在内 select * from userinfo where age in(30,35);</li><li>is null 空查询 select * in userinfo where address is null;</li><li>like 模糊查询 % 代表1个或者多个<ul><li>select * from userinfo where username like ‘%us’;  us在后面</li><li>select * from userinfo where username like ‘us%’;  us在前面</li><li>select * from userinfo where username like ‘%us%’; us在任何位置</li><li>select * from userinfo where username like ‘__us’; us前面必须有两个字符</li><li>select * from userinfo where username like binary ‘__Us’; 区分大小写</li></ul></li></ul><p>示例</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from userinfo <span class="built_in">where</span> username=<span class="string">&#x27;user3&#x27;</span> and password=<span class="string">&#x27;123123&#x27;</span>;</span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">| userid | username | password | address   | valid | birth               |</span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">|      3 | user3    | 123123   | guangzhou |     1 | 1989-01-01 01:01:01 |</span><br><span class="line">+--------+----------+----------+-----------+-------+---------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue项目的基础设施搭建（一）</title>
      <link href="/environment/frontend/vue/"/>
      <url>/environment/frontend/vue/</url>
      
        <content type="html"><![CDATA[<p>vue3 + typescript + eslint + husky + pnpm</p><p>统一化团队的代码风格，样式，git规范等</p><span id="more"></span><h2 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h2><p>一般前端基建包括以下内容：</p><ul><li>基本语言：javascript、Typescript</li><li>环境配置：env文件内容注入</li><li>打包构建工具：例如Webpack、Rollup、vite等；</li><li>包管理工具：例如npm、Yarn、pnpm等；</li><li>前端框架：例如React、Vue.js等；</li><li>代码质量工具：例如ESLint、Prettier等；</li><li>单元测试：例如Jest、Mocha等；</li><li>HTTP请求库：例如Axios、Fetch等；</li><li>状态管理工具：例如Redux、Mobx、vuex、pinna等；</li><li>UI组件库：例如Ant Design、Element UI、自建组件库等；</li><li>前端性能分析工具：例如Lighthouse、WebPageTest等；</li><li>应用部署与自动化工具：例如Docker、Travis CI等。</li></ul><h2 id="monorepo项目搭建"><a href="#monorepo项目搭建" class="headerlink" title="monorepo项目搭建"></a>monorepo项目搭建</h2><p>现在很大一部分框架都采用了pnpm进行多包的管理，例如vue，element-plus等</p><p>官方文档：<a href="https://pnpm.io/zh/motivation">https://pnpm.io/zh/motivation</a></p><p>具体事项不再细说，本文章主要目的是手把手的操作与记录。</p><h3 id="pnpm安装"><a href="#pnpm安装" class="headerlink" title="pnpm安装"></a>pnpm安装</h3><p>个人建议pnpm全局安装，更加的方便</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局安装pnpm</span></span><br><span class="line">npm install -g pnpm</span><br><span class="line"><span class="comment"># 打印版本，当前我使用的8.0.0</span></span><br><span class="line">pnpm --version </span><br><span class="line"><span class="comment"># 列出帮助文档</span></span><br><span class="line">pnpm -h </span><br></pre></td></tr></table></figure><h3 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h3><p>pnpm-workspace.yaml定义了工作空间的根目录，并能够使您从工作空间中包含 &#x2F; 排除目录 。默认情况下，包含所有子目录。</p><p>在项目根目录初始化和创建pnpm-workspace.yaml文件，并填入示例内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm init</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> pnpm-workspace.yaml</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pnpm-workspace.yaml</span></span><br><span class="line"><span class="attr">packages:</span></span><br><span class="line">  <span class="comment"># packages下所有直接子包</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;packages/*&#x27;</span></span><br></pre></td></tr></table></figure><p>假定我们的模块分块是core，utils，components，那么就可以在packages目录下分别新建这三个文件夹，分别执行pnpm init去生成对应package.json文件</p><p>示例：其他模块同理，这里不再赘述</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> packages</span><br><span class="line"><span class="built_in">mkdir</span> core &amp;&amp; <span class="built_in">cd</span> core &amp;&amp; pnpm init</span><br></pre></td></tr></table></figure><h4 id="node-modules扁平化的问题"><a href="#node-modules扁平化的问题" class="headerlink" title="node_modules扁平化的问题"></a>node_modules扁平化的问题</h4><p>pnpm的node_modules结构是非扁平化的，而npm和yarn采用了平铺的node_modules结构，平铺结构的一个较明显的问题是幽灵依赖，即在package.json中没有定义，但是我们可以导入使用的依赖。</p><p>如果需要pnpm将node_modules平铺，根目录新建.npmrc文件，填入shamefully-hoist&#x3D;true</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .npmrc</span></span><br><span class="line">shamefully-hoist=<span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h2><p>typescript的安装一般会选择跟随项目，即在项目内安装typescript，避免不同typescript版本导致的兼容性问题</p><h3 id="安装和初始化"><a href="#安装和初始化" class="headerlink" title="安装和初始化"></a>安装和初始化</h3><p>全项目ts，安装在根目录即可</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add typescript -Dw</span><br></pre></td></tr></table></figure><p>初始化，操作完成后执行目录会生成一个tsconfig.json</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx tsc --init</span><br></pre></td></tr></table></figure><h3 id="tsconfig"><a href="#tsconfig" class="headerlink" title="tsconfig"></a>tsconfig</h3><p>参考element-plus，为了提高tsconfig的扩展性，提供tsconfig.base.json，tsconfig.web.json, tsconfig.json等文件，tsconfig.json主要作为一个入口，用于引用其他tsconfig文件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.base.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">/* Visit https://aka.ms/tsconfig to read more about this file */</span></span><br><span class="line">    </span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2018&quot;</span><span class="punctuation">,</span> <span class="comment">// es版本，不同的es版本会对es特性进行降级</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span> <span class="comment">// 指定生成哪个模块系统代码 &quot;CommonJS&quot; &quot;ES6&quot;或 &quot;ESNext&quot;。 </span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span> <span class="comment">// 如何处理模块</span></span><br><span class="line">    <span class="attr">&quot;checkJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 在 .js文件中报告错误。与 --allowJs配合使用</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 允许编译javascript文件</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">,</span> <span class="comment">// 解析非相对模块名的基准目录</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置baseUrl来告诉编译器到哪里去查找模块。 所有非相对模块导入都会被当做相对于 baseUrl</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noUnusedLocals&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 若有未使用的局部变量则抛错</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 允许解析json文件</span></span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 允许从没有设置默认导出的模块中默认导入。这并不影响代码的输出，仅为了类型检查。 设置了esModuleInterop和module !== es2015 / esnext</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * import * as moment from &quot;moment&quot; 等价于 const moment = require(&quot;moment&quot;)</span></span><br><span class="line"><span class="comment">    * import moment from &quot;moment&quot; 等价于 const moment = require(&quot;moment&quot;).default</span></span><br><span class="line"><span class="comment">    * es6模块规范规定，import * as x 应该是一个对象，ts处理成 =require(xxx)的行为是把导入当作一个可调用的函数，不符合规范</span></span><br><span class="line"><span class="comment">    * 开启esModuleInterop会自动修复这个转译问题</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;removeComments&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 如果composite为true</span></span><br><span class="line">    <span class="comment">// rootDir设置，如果没有被显式指定，默认为包含tsconfig文件的目录</span></span><br><span class="line">    <span class="comment">// 必须匹配到include模式或者files数组</span></span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span> <span class="comment">// 所有输入的 非声明文件 中的最长公共路径，</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// 指定要包含的类型包名称，而不需要在源文件中引用</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 路径映射</span></span><br><span class="line">      <span class="attr">&quot;@acelcdev/lc-client-*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;packages/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.web.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig.base.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;composite&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 引用的工程必须启用新的composite设置</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span> <span class="comment">// tsx文件里面支持jsx</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2018&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM.Iterable&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// 编译过程中需要引入的库文件的列表</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// 忽略所有的声明文件（ *.d.ts）的类型检查。</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;packages/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/__tests__/**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/gulpfile.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/test-helper&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;**/*.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;docs&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>总入口</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;references&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig.web.json&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>项目根目录执行</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx tsc --build tsconfig.json</span><br></pre></td></tr></table></figure><p>在根目录生成了dist文件夹，内部结构与packages一致，同时具有js文件和d.ts声明文件</p><h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><h3 id="安装和初始化-1"><a href="#安装和初始化-1" class="headerlink" title="安装和初始化"></a>安装和初始化</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add eslint -Dw</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create @eslint/config</span><br></pre></td></tr></table></figure><p>这里笔者选择的是To check syntax and find problems</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? How would you like to use ESLint? … </span><br><span class="line">  To check syntax only</span><br><span class="line">❯ To check syntax and find problems</span><br><span class="line">  To check syntax, find problems, and enforce code style</span><br></pre></td></tr></table></figure><p>使用的是es6规范，所以选择javascript modules，要看自己项目需求</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? What <span class="built_in">type</span> of modules does your project use? ...</span><br><span class="line">&gt; JavaScript modules (import/export)</span><br><span class="line">  CommonJS (require/exports)</span><br><span class="line">  None of these</span><br></pre></td></tr></table></figure><p>看自己项目需求</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Which framework does your project use? … </span><br><span class="line">  React</span><br><span class="line">❯ Vue.js</span><br><span class="line">  None of these</span><br></pre></td></tr></table></figure><p>使用ts?</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Does your project use TypeScript? » No / Yes</span><br></pre></td></tr></table></figure><p>两个都选</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Where does your code run? ...  (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)</span><br><span class="line">√ Browser</span><br><span class="line">√ Node</span><br></pre></td></tr></table></figure><p>配置文件格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? What format do you want your config file to be in? ...</span><br><span class="line">&gt; JavaScript</span><br><span class="line">  YAML</span><br><span class="line">  JSON</span><br></pre></td></tr></table></figure><p>笔者选择了yes</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eslint-plugin-vue@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest</span><br><span class="line">? Would you like to install them now? › No / Yes</span><br></pre></td></tr></table></figure><p>后续的可以根据项目需求调整即可，最后生成.eslint.js文件</p><p>项目根目录安装下列eslint插件</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add eslint-plugin-vue @typescript-eslint/eslint-plugin@latest -Dw</span><br></pre></td></tr></table></figure><h3 id="eslintrc-js-amp-eslintignore"><a href="#eslintrc-js-amp-eslintignore" class="headerlink" title=".eslintrc.js &amp; .eslintignore"></a>.eslintrc.js &amp; .eslintignore</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es2021&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:vue/vue3-recommended&quot;</span>, <span class="comment">// 原来是plugin:vue/vue3-essential</span></span><br><span class="line">        <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;overrides&quot;</span>: [</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="string">&quot;latest&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@typescript-eslint&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;semi&quot;</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>.eslintignore文件是一个纯文本文件，每一行都是一个glob模式告知eslint忽略哪些文件或者目录</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .eslintignore</span></span><br><span class="line">*.js</span><br><span class="line">dist</span><br><span class="line">docs</span><br></pre></td></tr></table></figure><h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p>根目录package.json新增脚本，目前只需要校验packages里面的ts文件，具体文件需要根据项目需求进行配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --ext .ts packages/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --ext .ts packages/ --fix&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>在index.ts内定义了const a &#x3D; 1，故意不带分号，eslintrc里面设置了不带分号就报错</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pnpm lint</span><br><span class="line"></span><br><span class="line">&gt; eslint --ext .ts packages/</span><br><span class="line"></span><br><span class="line">/path/packages/core/index.ts</span><br><span class="line">  1:7   warning  <span class="string">&#x27;a&#x27;</span> is assigned a value but never used  @typescript-eslint/no-unused-vars</span><br><span class="line">  1:12  error    Missing semicolon                       semi</span><br><span class="line"></span><br><span class="line">✖ 2 problems (1 error, 1 warning)</span><br><span class="line">  1 error and 0 warnings potentially fixable with the `--fix` option.</span><br></pre></td></tr></table></figure><p>这个时候可以运行pnpm lint:fix进行修复</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pnpm lint:fix</span><br><span class="line"><span class="comment"># 修复后，只剩一个a变量定义但没有使用的warning</span></span><br><span class="line">&gt; eslint --ext .ts packages/ --fix</span><br><span class="line"></span><br><span class="line">/path/packages/core/index.ts</span><br><span class="line">  1:7  warning  <span class="string">&#x27;a&#x27;</span> is assigned a value but never used  @typescript-eslint/no-unused-vars</span><br><span class="line"></span><br><span class="line">✖ 1 problem (0 errors, 1 warning)</span><br></pre></td></tr></table></figure><h3 id="vscode-eslint设置"><a href="#vscode-eslint设置" class="headerlink" title="vscode eslint设置"></a>vscode eslint设置</h3><p>生效的前提是必须去vscode的扩展商店安装eslint插件</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .vscode/settings.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;update.enableWindowsBackgroundUpdates&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 每次保存的时候自动格式化</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dbaeumer.vscode-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.format.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.alwaysShowStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;typescriptreact&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="husky-amp-commitlint"><a href="#husky-amp-commitlint" class="headerlink" title="husky &amp; commitlint"></a>husky &amp; commitlint</h2><p>husky是前端工程化的一个重要工具，可以方便的向项目中添加git hooks，一般在commit之前校验代码，commit的时候检验commit信息是否符合规范，而且设置简单。</p><h3 id="husky安装和初始化"><a href="#husky安装和初始化" class="headerlink" title="husky安装和初始化"></a>husky安装和初始化</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add husky -Dw</span><br></pre></td></tr></table></figure><p>package.json中添加prepare脚本，执行git init，再执行pnpm prepare</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;prepare&quot;</span><span class="punctuation">:</span> <span class="string">&quot;husky install&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>执行完上述命令后，根目录会存在一个.husky文件夹，接下来执行以下命令，在commit的时候，就会自动运行pnpm lint，如果lint不通过，将会终止git commit。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/pre-commit <span class="string">&quot;pnpm lint&quot;</span></span><br></pre></td></tr></table></figure><p>如果git commit因为代码校验不通过而被终止，这时候可以通过pnpm lint:fix进行代码自动格式化，通过代码校验后即可以再次commit</p><h3 id="commitlint安装和初始化"><a href="#commitlint安装和初始化" class="headerlink" title="commitlint安装和初始化"></a>commitlint安装和初始化</h3><p>commitlint的作用是校验commit信息的规范性，官方提供了对应commit信息的模板，类似于git commit -m “test” 这类的commit是无法通过校验的。</p><p>一般要求的格式是</p><ul><li>feat: xxx</li><li>fix: xxx</li><li>docs: xxx</li></ul><p>官方文档：<a href="https://commitlint.js.org/#/reference-prompt">https://commitlint.js.org/#/reference-prompt</a></p><p>示例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;feat: add some feature&quot;</span><br><span class="line">git commit -m &quot;fix: fix some bug&quot;</span><br></pre></td></tr></table></figure><h4 id="安装和初始化-2"><a href="#安装和初始化-2" class="headerlink" title="安装和初始化"></a>安装和初始化</h4><p>安装</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add @commitlint/cli @commitlint/config-conventional -Dw</span><br></pre></td></tr></table></figure><p>设置commitlint需要遵循的规范，在根目录创建commitlint.config.js，填入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;@commitlint/config-conventional&quot;</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>配合husky使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg  &#x27;npx --no -- commitlint --edit $&#123;1&#125;&#x27;</span><br></pre></td></tr></table></figure><h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><p>首先故意设置const a &#x3D; 1 不带分号，导致pre-commit终止</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; eslint --ext .ts packages/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/path/packages/client/index.ts</span><br><span class="line">  1:7   warning  <span class="string">&#x27;a&#x27;</span> is assigned a value but never used  @typescript-eslint/no-unused-vars</span><br><span class="line">  1:14  error    Missing semicolon                       semi</span><br><span class="line"></span><br><span class="line">✖ 2 problems (1 error, 1 warning)</span><br><span class="line">  1 error and 0 warnings potentially fixable with the `--fix` option.</span><br><span class="line"></span><br><span class="line"> ELIFECYCLE  Command failed with <span class="built_in">exit</span> code 1.</span><br></pre></td></tr></table></figure><p>运行pnpm lint:fix修复，修复后提示a未被使用，但是没有error</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; eslint --ext .ts packages/ --fix</span><br><span class="line"></span><br><span class="line">/path/packages/client/index.ts</span><br><span class="line">  1:7  warning  <span class="string">&#x27;a&#x27;</span> is assigned a value but never used  @typescript-eslint/no-unused-vars</span><br><span class="line"></span><br><span class="line">✖ 1 problem (0 errors, 1 warning)</span><br></pre></td></tr></table></figure><p>再次提交commit，故意不按照commit规范</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;test commit-msg hook&quot;</span></span><br></pre></td></tr></table></figure><p>此时提示commit-msg hook error</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">⧗  input: <span class="built_in">test</span> commit-msg hook</span><br><span class="line">✖   Please add rules to your `commitlint.config.js`</span><br><span class="line">    - Getting started guide: https://commitlint.js.org/<span class="comment">#/?id=getting-started</span></span><br><span class="line">    - Example config: https://github.com/conventional-changelog/commitlint/blob/master/%40commitlint/config-conventional/index.js [empty-rules]</span><br><span class="line"></span><br><span class="line">✖   found 1 problems, 0 warnings</span><br><span class="line">ⓘ   Get <span class="built_in">help</span>: https://github.com/conventional-changelog/commitlint/<span class="comment">#what-is-commitlint</span></span><br><span class="line"></span><br><span class="line">husky - commit-msg hook exited with code 1 (error)</span><br></pre></td></tr></table></figure><p>修改commit msg，校验通过</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;test: test commitlint&quot;</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">feat/initial 6490b0c] <span class="built_in">test</span>: <span class="built_in">test</span> commit lint</span><br><span class="line"> 3 files changed, 1077 insertions(+)</span><br><span class="line"> create mode 100755 .husky/commit-msg</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文的内容相对基础，主要是总结一下具体的用途和解决方案，并非很详细的教学内容，如果需要高级的用法，最好的方法还是通过官方文档，去学习如何配置，高级用法等。</p><p>下一篇计划开始编写与环境配置、构建相关的内容。</p>]]></content>
      
      
      <categories>
          
          <category> environment </category>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> environment </tag>
            
            <tag> frontend </tag>
            
            <tag> 前端 </tag>
            
            <tag> vue3 </tag>
            
            <tag> typescipt </tag>
            
            <tag> eslint </tag>
            
            <tag> husky </tag>
            
            <tag> pnpm </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
